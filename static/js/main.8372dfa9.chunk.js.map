{"version":3,"sources":["authentication-provider/index.tsx","utils/getTokenEncryptSecret.ts","login/index.tsx","utils/getPasswordHashSalt.ts","dashboard/routes.tsx","dashboard/tourSteps.ts","analysis/RoomStatus.tsx","analysis/Revenue.tsx","analysis/index.tsx","room/index.tsx","kind-of-room/Grid.tsx","kind-of-room/Modal.tsx","kind-of-room/index.tsx","customer/index.tsx","agreement/index.tsx","unitPrice/index.tsx","bill/index.tsx","equipment/index.tsx","dashboard/index.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["AuthenticationContext","createContext","authenticate","setAuthenticate","AuthenticationProvider","children","token","localStorage","getItem","useState","verify","Provider","value","LoginPage","useForm","form","registration","setRegistration","useContext","db","window","roomManagementSystemDB","handleLogin","validateFields","then","a","username","password","remember","account","where","equals","toArray","data","length","error","add","id","uuidv4","hashSync","success","resetFields","compareSync","sign","expiresIn","setItem","className","name","Item","rules","required","message","prefix","UserOutlined","placeholder","onPressEnter","autoFocus","Password","LockOutlined","type","valuePropName","noStyle","onClick","prev","routes","route","path","icon","BarChartOutlined","component","BankOutlined","BranchesOutlined","SmileOutlined","PaperClipOutlined","DollarOutlined","FileOutlined","ScissorOutlined","location","pathname","tourSteps","selector","content","RoomStatus","roomData","setRoomData","stillEmptyNumber","filter","room","stillEmpty","fetchRoomData","useEffect","pieConfig","appendPadding","angleField","colorField","radius","label","offset","_ref","percent","concat","toFixed","style","fontSize","textAlign","interactions","marginTop","display","justifyContent","width","Title","level","Revenue","agreementData","setAgreementData","monthValue","setMonthValue","fetchAgreementData","agreement","agreements","Promise","all","map","get","roomId","kindOfRoom","kindOfRoomId","filteredAgreementData","moment","isSameOrBefore","date","isSameOrAfter","lineConfig","Array","from","diff","_","index","month","format","price","reduce","b","xField","yField","point","size","shape","fill","stroke","lineWidth","tooltip","showMarkers","state","active","shadowBlur","RangePicker","picker","marginBottom","ranges","startOf","endOf","onChange","valueOf","AnalysisPage","PageContainer","header","title","ghost","gutter","colSpan","RoomPage","onChangeTourStep","visibleModal","setVisibleModal","rowData","setRowData","edit","setEdit","foreignKey","setForeignKey","fetchForeignKeyData","stillEmptyValueFormatter","params","extra","height","innerHeight","animateRows","defaultColDef","floatingFilter","sortable","columnDefs","headerName","field","filterParams","valueFormatter","pinned","cellRendererFramework","setFieldsValue","EditOutlined","marginRight","DeleteOutlined","danger","warning","onOk","code","delete","find","visible","centered","cancelText","update","updated","onCancel","labelCol","span","wrapperCol","optionLabelProp","Option","KindOfRoomGrid","forwardRef","ref","getKindOfRoomModalRef","formatter","Intl","NumberFormat","currency","fetchData","useImperativeHandle","handleDelete","getForm","openModal","handleEdit","KindOfRoomModal","setVisible","replace","parser","KindOfRoomPage","kindOfRoomGridRef","useRef","kindOfRoomModalRef","current","CustomerPage","customer","dateOfBirthValueFormatter","dateOfBirth","rest","fullName","initialValues","sex","Group","AgreementPage","resizable","tempDate","JSON","parse","stringify","formatDate","customerIds","includes","join","usedCustomers","customerId","mode","UnitPricePage","unitPrice","dateValueFormatter","isAfter","BillPage","bill","groupMultiAutoColumn","enableRangeSelection","rowGroup","hide","printData","node","allLeafChildren","child","printRef","createRef","trigger","PrinterOutlined","key","cellPadding","rowSpan","amountOfElectricity","electricityBill","amountOfWater","waterBill","parkingFee","junkMoney","total","electricity","water","parking","numberOfVehicles","EquipmentRoom","equipment","Dashboard","tourStep","setTourStep","isTourOpen","setIsTourOpen","setPathname","timeout","hasTourGuide","confirm","handleListItemClick","clearTimeout","setTimeout","handleUserMenuClick","e","removeItem","handleChangeTourStep","step","time","basename","logo","rightContentRender","overlay","LogoutOutlined","menuItemRender","item","dom","to","fixSiderbar","render","steps","disableFocusLock","showCloseButton","showButtons","showNavigation","goToStep","isOpen","disableKeyboardNavigation","onRequestClose","App","routeProps","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","LicenseManager","setLicenseKey","Dexie","version","stores","ReactDOM","StrictMode","locale","viVN","document","getElementById"],"mappings":"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","file":"static/js/main.8372dfa9.chunk.js","sourcesContent":["import { createContext, FC, useState } from 'react';\nimport { verify } from 'jsonwebtoken';\nimport { getTokenEncryptSecret } from '../utils/getTokenEncryptSecret';\n\ninterface AuthenticationContextProps {\n  authenticate: boolean;\n  setAuthenticate: React.Dispatch<any>;\n}\n\nexport const AuthenticationContext = createContext<AuthenticationContextProps>({\n  authenticate: false,\n  setAuthenticate: () => {}\n});\n\nconst AuthenticationProvider: FC = ({ children }) => {\n  const token = localStorage.getItem('access-token');\n  const [authenticate, setAuthenticate] = useState<any>(\n    !!token && verify(token, getTokenEncryptSecret())\n  );\n\n  return (\n    <AuthenticationContext.Provider\n      value={{\n        authenticate,\n        setAuthenticate\n      }}\n    >\n      {children}\n    </AuthenticationContext.Provider>\n  );\n};\n\nexport default AuthenticationProvider;\n","export const getTokenEncryptSecret = () => 's3cr3t!@#';\n","/* eslint jsx-a11y/anchor-is-valid:0 */\nimport { FC, useContext, useState } from 'react';\nimport { v4 as uuidv4 } from 'uuid';\nimport { Form, Button, Input, Checkbox, message } from 'antd';\nimport { UserOutlined, LockOutlined } from '@ant-design/icons';\nimport { sign } from 'jsonwebtoken';\nimport { hashSync, compareSync } from 'bcryptjs';\nimport { RouteComponentProps, StaticContext } from 'react-router';\nimport { AuthenticationContext } from '../authentication-provider';\nimport { getTokenEncryptSecret } from '../utils/getTokenEncryptSecret';\nimport { getPasswordHashSalt } from '../utils/getPasswordHashSalt';\nimport './style';\n\ninterface LoginPageProps extends RouteComponentProps<{}, StaticContext, unknown> {}\n\nconst LoginPage: FC<LoginPageProps> = () => {\n  const [form] = Form.useForm<Omit<IAccount, 'id'> & { remember: boolean }>();\n  const [registration, setRegistration] = useState(false);\n  const { setAuthenticate } = useContext(AuthenticationContext);\n  const db = window.roomManagementSystemDB;\n\n  const handleLogin = () => {\n    form.validateFields().then(async ({ username, password, remember }) => {\n      const data = await db!.account!.where('username').equals(username).toArray();\n\n      if (registration) {\n        if (data.length > 0) {\n          message.error('Tài khoản đã tồn tại!');\n        } else {\n          db!\n            .account!.add({\n              id: uuidv4(),\n              username,\n              password: hashSync(password, getPasswordHashSalt())\n            })\n            .then(() => {\n              message.success('Tạo tài khoản thành công!');\n              setRegistration(false);\n              form.resetFields();\n            });\n        }\n      } else {\n        if (data.length > 0 && compareSync(password, data[0].password)) {\n          const token = sign({ username, password }, getTokenEncryptSecret(), {\n            expiresIn: '7d'\n          });\n          setAuthenticate(true);\n          if (remember) {\n            localStorage.setItem('access-token', token);\n          }\n        } else {\n          message.error('Tên đăng nhập hoặc mật khẩu sai!');\n        }\n      }\n    });\n  };\n\n  return (\n    <div className='login-page'>\n      <div className='login-box'>\n        <div className='login-title'>{registration ? 'Đăng kí' : 'Đăng nhập'}</div>\n\n        <Form name='normal_login' className='login-form' form={form}>\n          <Form.Item\n            name='username'\n            rules={[{ required: true, message: 'Hãy nhập tên đăng nhập của bạn!' }]}\n          >\n            <Input\n              prefix={<UserOutlined className='site-form-item-icon' />}\n              placeholder='Tên đăng nhập'\n              onPressEnter={handleLogin}\n              autoFocus\n            />\n          </Form.Item>\n\n          <Form.Item\n            name='password'\n            rules={[{ required: true, message: 'Hãy nhập mật khẩu của bạn!' }]}\n          >\n            <Input.Password\n              prefix={<LockOutlined className='site-form-item-icon' />}\n              type='password'\n              placeholder='Mật khẩu'\n              onPressEnter={handleLogin}\n            />\n          </Form.Item>\n\n          {registration || (\n            <Form.Item>\n              <Form.Item name='remember' valuePropName='checked' noStyle>\n                <Checkbox>Giữ tôi luôn đăng nhập</Checkbox>\n              </Form.Item>\n\n              <a className='login-form-forgot'>Quên mật khẩu</a>\n            </Form.Item>\n          )}\n\n          <Form.Item>\n            <Button type='primary' onClick={handleLogin} className='login-form-button'>\n              {registration ? 'Đăng kí' : 'Đăng nhập'}\n            </Button>\n          </Form.Item>\n\n          <Form.Item noStyle>\n            Hoặc{' '}\n            <a\n              onClick={() => {\n                setRegistration(prev => !prev);\n                form.resetFields();\n              }}\n            >\n              {registration ? 'đăng nhập' : 'đăng kí ngay!'}\n            </a>\n          </Form.Item>\n        </Form>\n      </div>\n    </div>\n  );\n};\n\nexport default LoginPage;\n","export const getPasswordHashSalt = () => 11;\n","import {\n  BarChartOutlined,\n  BankOutlined,\n  BranchesOutlined,\n  SmileOutlined,\n  PaperClipOutlined,\n  DollarOutlined,\n  FileOutlined,\n  ScissorOutlined\n} from '@ant-design/icons';\n\nexport const routes = {\n  route: {\n    path: '/',\n    routes: [\n      {\n        path: '/analysis',\n        name: 'Thống kê',\n        icon: <BarChartOutlined />,\n        component: './Analysis'\n      },\n      {\n        path: '/room',\n        name: 'Quản lý phòng',\n        icon: <BankOutlined />,\n        component: './Room'\n      },\n      {\n        path: '/kind-of-room',\n        name: 'Quản lý loại phòng',\n        icon: <BranchesOutlined />,\n        component: './KindOfRoom'\n      },\n      {\n        path: '/customer',\n        name: 'Quản lý khách hàng',\n        icon: <SmileOutlined />,\n        component: './Customer'\n      },\n      {\n        path: '/agreement',\n        name: 'Quản lý hợp đồng',\n        icon: <PaperClipOutlined />,\n        component: './Agreement'\n      },\n      {\n        path: '/unit-price',\n        name: 'Quản lý đơn giá',\n        icon: <DollarOutlined />,\n        component: './UnitPrice'\n      },\n      {\n        path: '/bill',\n        name: 'Quản lý hóa đơn',\n        icon: <FileOutlined />,\n        component: './Bill'\n      },\n      {\n        path: '/equipment',\n        name: 'Quản lý trang thiết bị',\n        icon: <ScissorOutlined />,\n        component: './Equipment'\n      }\n    ]\n  },\n  location: {\n    pathname: '/'\n  }\n};\n","export const tourSteps = [\n  {\n    selector: 'ul.ant-menu-inline li.ant-menu-item:nth-child(3)',\n    content: 'Hãy tạo loại phòng!'\n  },\n  {\n    selector: '.ant-page-header-heading-extra .ant-btn',\n    content: 'Tạo mới loại phòng!'\n  },\n  {\n    selector: '.ant-modal-wrap .ant-modal',\n    content: 'Tạo thông tin loại phòng!'\n  },\n  {\n    selector: 'ul.ant-menu-inline li.ant-menu-item:nth-child(2)',\n    content: 'Hãy tạo phòng!'\n  },\n  {\n    selector: '.ant-page-header-heading-extra .ant-btn',\n    content: 'Tạo mới phòng!'\n  },\n  {\n    selector: '.ant-modal-wrap .ant-modal',\n    content: 'Tạo thông tin phòng!'\n  },\n  {\n    selector: 'ul.ant-menu-inline li.ant-menu-item:nth-child(4)',\n    content: 'Hãy tạo khách hàng!'\n  },\n  {\n    selector: '.ant-page-header-heading-extra .ant-btn',\n    content: 'Tạo mới khách hàng!'\n  },\n  {\n    selector: '.ant-modal-wrap .ant-modal',\n    content: 'Tạo thông tin khách hàng!'\n  },\n  {\n    selector: 'ul.ant-menu-inline li.ant-menu-item:nth-child(5)',\n    content: 'Hãy tạo hợp đồng!'\n  },\n  {\n    selector: '.ant-page-header-heading-extra .ant-btn',\n    content: 'Tạo mới hợp đồng!'\n  },\n  {\n    selector: '.ant-modal-wrap .ant-modal',\n    content: 'Tạo thông tin hợp đồng!'\n  },\n  {\n    selector: 'ul.ant-menu-inline li.ant-menu-item:nth-child(6)',\n    content: 'Hãy tạo đơn giá!'\n  },\n  {\n    selector: '.ant-page-header-heading-extra .ant-btn',\n    content: 'Tạo mới đơn giá!'\n  },\n  {\n    selector: '.ant-modal-wrap .ant-modal',\n    content: 'Tạo thông tin đơn giá!'\n  },\n  {\n    selector: 'ul.ant-menu-inline li.ant-menu-item:nth-child(7)',\n    content: 'Hãy tạo hóa đơn!'\n  },\n  {\n    selector: '.ant-page-header-heading-extra .ant-btn',\n    content: 'Tạo mới hóa đơn!'\n  },\n  {\n    selector: '.ant-modal-wrap .ant-modal',\n    content: 'Tạo thông tin hóa đơn!'\n  },\n  {\n    selector: 'ul.ant-menu-inline li.ant-menu-item:first-child',\n    content: 'Xem thống kê doanh thu!'\n  },\n  {\n    selector: '.ant-picker.ant-picker-range',\n    content: 'Chọn thời gian để xem thống kê!'\n  }\n];\n","import { FC, useEffect, useState } from 'react';\nimport { Typography } from 'antd';\nimport Pie from '@ant-design/charts/es/pie';\n\nconst RoomStatus: FC = () => {\n  const db = window.roomManagementSystemDB;\n  const [roomData, setRoomData] = useState<IRoom[]>([]);\n  const stillEmptyNumber = roomData.filter(room => !room.stillEmpty).length;\n\n  const fetchRoomData = async () => {\n    setRoomData(await db!.room!.toArray());\n  };\n\n  useEffect(() => {\n    fetchRoomData();\n    // eslint-disable-next-line\n  }, []);\n\n  const pieData = [\n    {\n      type: 'Còn trống',\n      value: stillEmptyNumber\n    },\n    {\n      type: 'Có khách ở',\n      value: roomData.length - stillEmptyNumber\n    }\n  ];\n\n  const pieConfig = {\n    appendPadding: 10,\n    data: pieData,\n    angleField: 'value',\n    colorField: 'type',\n    radius: 0.9,\n    label: {\n      type: 'inner',\n      offset: '-30%',\n      content: function content(_ref: any) {\n        var percent = _ref.percent;\n        return ''.concat((percent * 100).toFixed(0), '%');\n      },\n      style: {\n        fontSize: 14,\n        textAlign: 'center'\n      }\n    },\n    interactions: [{ type: 'element-active' }]\n  };\n\n  return (\n    <>\n      <Pie {...pieConfig} />\n\n      <div style={{ marginTop: 24, display: 'flex', justifyContent: 'center', width: '100%' }}>\n        <Typography.Title level={4}>Tình trạng phòng</Typography.Title>\n      </div>\n    </>\n  );\n};\n\nexport default RoomStatus;\n","import { FC, useEffect, useState } from 'react';\nimport { Typography, DatePicker } from 'antd';\nimport moment from 'moment';\nimport Line from '@ant-design/charts/es/line';\nimport { ICustomAgreements, ICustomRoom, RevenueProps } from './interface';\n\nconst Revenue: FC<RevenueProps> = () => {\n  const db = window.roomManagementSystemDB;\n  const [agreementData, setAgreementData] = useState<ICustomAgreements>([]);\n  const [monthValue, setMonthValue] = useState<number[]>([]);\n\n  const fetchAgreementData = async () => {\n    const agreements = (await db!.agreement!.toArray()) as ICustomAgreements;\n    await Promise.all(\n      agreements.map(async agreement => {\n        [agreement.room] = (await Promise.all([db!.room!.get(agreement.roomId)])) as ICustomRoom[];\n\n        [agreement.room!.kindOfRoom] = (await Promise.all([\n          db!.kindOfRoom!.get(agreement.room.kindOfRoomId)\n        ])) as IKindOfRoom[];\n      })\n    );\n    setAgreementData(agreements);\n  };\n\n  useEffect(() => {\n    fetchAgreementData();\n    // eslint-disable-next-line\n  }, []);\n\n  const filteredAgreementData = agreementData.filter(\n    agreement =>\n      moment(monthValue[0]).isSameOrBefore(agreement.date[0]) ||\n      moment(monthValue[1]).isSameOrAfter(agreement.date[0])\n  );\n\n  const lineData =\n    monthValue.length > 0\n      ? Array.from({\n          length: moment(monthValue[1]).diff(moment(monthValue[0]), 'months') + 1\n        }).map((_, index) => ({\n          month: moment(monthValue[0]).add(index, 'month').format('MM/YYYY'),\n          value: filteredAgreementData\n            .filter(agreement =>\n              moment(monthValue[0]).add(index, 'month').isSameOrBefore(agreement.date[1])\n            )\n            .map(agreement => agreement.room.kindOfRoom.price)\n            .reduce((a, b) => a + b, 0)\n        }))\n      : [];\n\n  const lineConfig = {\n    data: lineData,\n    xField: 'month',\n    yField: 'value',\n    label: {},\n    point: {\n      size: 5,\n      shape: 'diamond',\n      style: {\n        fill: 'white',\n        stroke: '#5B8FF9',\n        lineWidth: 2\n      }\n    },\n    tooltip: { showMarkers: false },\n    state: {\n      active: {\n        style: {\n          shadowBlur: 4,\n          stroke: '#000',\n          fill: 'red'\n        }\n      }\n    },\n    interactions: [{ type: 'marker-active' }]\n  };\n\n  return (\n    <>\n      <DatePicker.RangePicker\n        picker='month'\n        style={{ width: 400, marginBottom: 24 }}\n        format={['MM/YYYY', 'MM/YYYY']}\n        ranges={{\n          '1 tháng': [moment().startOf('months'), moment().endOf('months')],\n          '3 tháng': [moment().startOf('months'), moment().add(3, 'months').endOf('months')],\n          '6 tháng': [moment().startOf('months'), moment().add(6, 'months').endOf('months')],\n          '1 năm': [moment().startOf('months'), moment().add(12, 'months').endOf('months')]\n        }}\n        onChange={value => {\n          setMonthValue([value![0]!.valueOf(), value![1]!.valueOf()]);\n        }}\n      />\n\n      <Line {...lineConfig} />\n\n      <div style={{ marginTop: 24, display: 'flex', justifyContent: 'center', width: '100%' }}>\n        <Typography.Title level={4}>Doanh thu</Typography.Title>\n      </div>\n    </>\n  );\n};\n\nexport default Revenue;\n","import { FC } from 'react';\nimport { PageContainer } from '@ant-design/pro-layout';\nimport ProCard from '@ant-design/pro-card';\nimport RoomStatus from './RoomStatus';\nimport Revenue from './Revenue';\nimport { AnalysisPageProps } from './interface';\n\nconst AnalysisPage: FC<AnalysisPageProps> = () => (\n  <PageContainer header={{ title: 'Thống kê' }}>\n    <ProCard ghost gutter={[24, 0]}>\n      <ProCard colSpan={8}>\n        <RoomStatus />\n      </ProCard>\n\n      <ProCard colSpan={16}>\n        <Revenue />\n      </ProCard>\n    </ProCard>\n  </PageContainer>\n);\n\nexport default AnalysisPage;\n","import { FC, useEffect, useState } from 'react';\nimport { v4 as uuidv4 } from 'uuid';\nimport { EditOutlined, DeleteOutlined } from '@ant-design/icons';\nimport { Button, Modal, Form, Input, message, Tooltip, Select } from 'antd';\nimport { PageContainer } from '@ant-design/pro-layout';\nimport ProCard from '@ant-design/pro-card';\nimport { AgGridReact } from 'ag-grid-react';\nimport { ValueFormatterParams } from 'ag-grid-community';\n\ninterface IForeignKey {\n  kindOfRoom: IKindOfRoom[];\n}\n\nexport interface RoomPageProps {\n  onChangeTourStep: (step: number, time?: number) => void;\n}\n\nconst RoomPage: FC<RoomPageProps> = ({ onChangeTourStep }) => {\n  const [visibleModal, setVisibleModal] = useState(false);\n  const [rowData, setRowData] = useState<IRoom[]>([]);\n  const [edit, setEdit] = useState('');\n  const [foreignKey, setForeignKey] = useState<IForeignKey>({\n    kindOfRoom: []\n  });\n  const [form] = Form.useForm<Omit<IRoom, 'id'>>();\n  const db = window.roomManagementSystemDB;\n\n  const fetchRoomData = async () => {\n    setRowData(await db!.room!.toArray());\n  };\n\n  const fetchForeignKeyData = async () => {\n    const kindOfRoom = await db!.kindOfRoom!.toArray();\n    setForeignKey({\n      kindOfRoom\n    });\n  };\n\n  useEffect(() => {\n    fetchRoomData();\n    fetchForeignKeyData();\n    // eslint-disable-next-line\n  }, []);\n\n  const handleEdit = (data: IRoom) => {\n    setEdit(data.id);\n    setVisibleModal(true);\n    form.setFieldsValue(data);\n  };\n\n  const handleModalOk = () => {\n    form.validateFields().then(async value => {\n      const data = await db!.room!.where('code').equals(value.code).toArray();\n\n      if (data.filter(({ id }) => (edit ? edit !== id : id)).length > 0) {\n        message.error(`Phòng ${value.name} đã tồn tại!`);\n        return;\n      }\n\n      if (edit) {\n        db!.room!.update(edit, value).then(updated => {\n          if (updated) {\n            message.success('Cập nhật thành công!');\n            setVisibleModal(false);\n            setEdit('');\n            form.resetFields();\n            fetchRoomData();\n          } else {\n            message.error('Cập nhật thất bại!');\n          }\n        });\n        return;\n      }\n\n      db!\n        .room!.add({\n          id: uuidv4(),\n          ...value\n        })\n        .then(() => {\n          message.success('Tạo thành công!');\n          setVisibleModal(false);\n          form.resetFields();\n          fetchRoomData();\n        });\n    });\n\n    onChangeTourStep(6, 200);\n  };\n\n  const handleModalCancel = () => {\n    setVisibleModal(false);\n    setEdit('');\n    form.resetFields();\n  };\n\n  const handleDeleteData = (data: IRoom) => {\n    Modal.warning({\n      title: `Bạn có muốn xóa phòng ${data.name}?`,\n      onOk: () => {\n        db!\n          .room!.where('code')\n          .equals(data.code)\n          .delete()\n          .then(() => {\n            message.success(`Xóa thành công!`);\n            fetchRoomData();\n          });\n      }\n    });\n  };\n\n  const stillEmptyValueFormatter = (params: ValueFormatterParams) =>\n    !params.value ? 'Có' : 'Không';\n\n  return (\n    <>\n      <PageContainer\n        extra={[\n          <Button\n            type='primary'\n            onClick={() => {\n              setVisibleModal(true);\n              onChangeTourStep(5, 400);\n            }}\n          >\n            Thêm mới\n          </Button>\n        ]}\n        header={{ title: 'Quản lý phòng' }}\n      >\n        <ProCard style={{ height: window.innerHeight - 168 }} className='ag-theme-alpine'>\n          <AgGridReact\n            animateRows\n            defaultColDef={{ floatingFilter: true, sortable: true, filter: true }}\n            columnDefs={[\n              { headerName: 'Mã', field: 'code', filter: 'agTextColumnFilter' },\n              { headerName: 'Tên', field: 'name', filter: 'agTextColumnFilter' },\n              {\n                headerName: 'Loại',\n                field: 'kindOfRoom',\n                filter: 'agTextColumnFilter'\n              },\n              {\n                headerName: 'Còn trống',\n                field: 'stillEmpty',\n                filterParams: {\n                  valueFormatter: stillEmptyValueFormatter\n                },\n                valueFormatter: stillEmptyValueFormatter\n              },\n              {\n                pinned: 'right',\n                field: '',\n                width: 100,\n                floatingFilter: false,\n                cellRendererFramework: (params: any) => (\n                  <>\n                    <Tooltip title='Chỉnh sửa'>\n                      <Button\n                        onClick={() => handleEdit(params.data)}\n                        icon={<EditOutlined />}\n                        style={{ marginRight: 8 }}\n                        type='primary'\n                      />\n                    </Tooltip>\n\n                    <Tooltip title='Xóa'>\n                      <Button\n                        icon={<DeleteOutlined />}\n                        danger\n                        onClick={() => handleDeleteData(params.data)}\n                      />\n                    </Tooltip>\n                  </>\n                )\n              }\n            ]}\n            rowData={rowData.map(data => ({\n              kindOfRoom: foreignKey.kindOfRoom!.find(type => type.id === data.kindOfRoomId)?.name,\n              ...data\n            }))}\n          />\n        </ProCard>\n      </PageContainer>\n\n      <Modal\n        visible={visibleModal}\n        title={edit ? 'Chỉnh sửa' : 'Thêm phòng mới'}\n        centered\n        cancelText='Hủy'\n        onOk={handleModalOk}\n        onCancel={handleModalCancel}\n      >\n        <Form name='add-form' form={form} labelCol={{ span: 6 }} wrapperCol={{ span: 18 }}>\n          <Form.Item label='Mã' name='code' rules={[{ required: true, message: 'Hãy nhập mã!' }]}>\n            <Input autoFocus />\n          </Form.Item>\n\n          <Form.Item label='Tên' name='name' rules={[{ required: true, message: 'Hãy nhập tên!' }]}>\n            <Input />\n          </Form.Item>\n\n          <Form.Item\n            label='Loại phòng'\n            name='kindOfRoomId'\n            rules={[{ required: true, message: 'Hãy chọn loại phòng!' }]}\n            style={{ marginBottom: 0 }}\n          >\n            <Select optionLabelProp='label'>\n              {foreignKey.kindOfRoom!.map(type => (\n                <Select.Option value={type.id} key={type.id} label={type.name}>\n                  {type.name} ({type.price})\n                </Select.Option>\n              ))}\n            </Select>\n          </Form.Item>\n        </Form>\n      </Modal>\n    </>\n  );\n};\n\nexport default RoomPage;\n","import { forwardRef, useEffect, useImperativeHandle, useState } from 'react';\nimport { EditOutlined, DeleteOutlined } from '@ant-design/icons';\nimport { Button, Tooltip, Modal, message } from 'antd';\nimport ProCard from '@ant-design/pro-card';\nimport { AgGridReact } from 'ag-grid-react';\nimport { KindOfRoomGridProps, KindOfRoomGridRef } from './interface';\n\nconst KindOfRoomGrid = forwardRef<KindOfRoomGridRef, KindOfRoomGridProps>(\n  ({ getKindOfRoomModalRef, edit }, ref) => {\n    const db = window.roomManagementSystemDB;\n    const [rowData, setRowData] = useState<IKindOfRoom[]>([]);\n    const formatter = new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'VND'\n    });\n\n    const fetchData = async () => {\n      setRowData(await db!.kindOfRoom!.toArray());\n    };\n\n    useImperativeHandle(ref, () => ({\n      fetchData\n    }));\n\n    useEffect(() => {\n      fetchData();\n      // eslint-disable-next-line\n    }, []);\n\n    const handleDelete = async (data: IKindOfRoom) => {\n      const room = await db!.room!.where({ kindOfRoomId: data.id }).toArray();\n\n      if (room.length > 0) {\n        message.error('Bạn không thể  loại phòng vì có phòng đã sử dụng');\n        return;\n      }\n\n      Modal.warning({\n        title: `Bạn có muốn xóa loại phòng ${data.name}?`,\n        onOk: () => {\n          db!\n            .kindOfRoom!.where('code')\n            .equals(data.code)\n            .delete()\n            .then(() => {\n              message.success(`Xóa thành công!`);\n              fetchData();\n            });\n        }\n      });\n    };\n\n    const handleEdit = (data: IKindOfRoom) => {\n      const { getForm, openModal } = getKindOfRoomModalRef();\n      edit(data.id);\n      openModal();\n      getForm().setFieldsValue(data);\n    };\n\n    return (\n      <ProCard style={{ height: window.innerHeight - 168 }} className='ag-theme-alpine'>\n        <AgGridReact\n          animateRows\n          defaultColDef={{ floatingFilter: true, sortable: true, filter: true }}\n          columnDefs={[\n            { headerName: 'Mã', field: 'code', filter: 'agTextColumnFilter' },\n            {\n              headerName: 'Tên',\n              field: 'name',\n              filter: 'agTextColumnFilter'\n            },\n            {\n              headerName: 'Giá',\n              field: 'price',\n              valueFormatter: params => formatter.format(params.value),\n              filter: 'agTextColumnFilter'\n            },\n            {\n              headerName: 'Tiền cọc',\n              field: 'deposit',\n              valueFormatter: params => formatter.format(params.value),\n              filter: 'agTextColumnFilter'\n            },\n            {\n              pinned: 'right',\n              field: '',\n              width: 100,\n              floatingFilter: false,\n              cellRendererFramework: (params: any) => (\n                <>\n                  <Tooltip title='Chỉnh sửa'>\n                    <Button\n                      onClick={() => handleEdit(params.data)}\n                      icon={<EditOutlined />}\n                      style={{ marginRight: 8 }}\n                      type='primary'\n                    />\n                  </Tooltip>\n\n                  <Tooltip title='Xóa'>\n                    <Button\n                      icon={<DeleteOutlined />}\n                      danger\n                      onClick={() => handleDelete(params.data)}\n                    />\n                  </Tooltip>\n                </>\n              )\n            }\n          ]}\n          rowData={rowData}\n        />\n      </ProCard>\n    );\n  }\n);\n\nexport default KindOfRoomGrid;\n","import { forwardRef, useImperativeHandle, useState } from 'react';\nimport { v4 as uuidv4 } from 'uuid';\nimport { Modal, Form, InputNumber, Input, message } from 'antd';\nimport { KindOfRoomModalProps, KindOfRoomModalRef } from './interface';\n\nconst KindOfRoomModal = forwardRef<KindOfRoomModalRef, KindOfRoomModalProps>(\n  ({ edit, onOk, onCancel }, ref) => {\n    const [visible, setVisible] = useState(false);\n    const [form] = Form.useForm<Omit<IKindOfRoom, 'id'>>();\n    const db = window.roomManagementSystemDB;\n\n    useImperativeHandle(ref, () => ({\n      getForm: () => form,\n      openModal: () => setVisible(true)\n    }));\n\n    const handleOk = () => {\n      form.validateFields().then(async value => {\n        const data = await db!.kindOfRoom!.where('code').equals(value.code).toArray();\n\n        if (data.filter(({ id }) => (edit ? edit !== id : id)).length > 0) {\n          message.error(`Loại phòng ${value.name} đã tồn tại!`);\n          return;\n        }\n\n        if (edit) {\n          db!.kindOfRoom!.update(edit, value).then(updated => {\n            if (updated) {\n              message.success('Cập nhật thành công!');\n              setVisible(false);\n              form.resetFields();\n              onOk();\n            } else {\n              message.error('Cập nhật thất bại!');\n            }\n          });\n          return;\n        }\n\n        db!\n          .kindOfRoom!.add({\n            id: uuidv4(),\n            ...value\n          })\n          .then(() => {\n            message.success('Tạo thành công!');\n            setVisible(false);\n            form.resetFields();\n            onOk();\n          });\n      });\n    };\n\n    const handleCancel = () => {\n      setVisible(false);\n      form.resetFields();\n      onCancel();\n    };\n\n    return (\n      <Modal\n        visible={visible}\n        title={edit ? 'Chỉnh sửa' : 'Thêm loại phòng mới'}\n        centered\n        cancelText='Hủy'\n        onOk={handleOk}\n        onCancel={handleCancel}\n      >\n        <Form name='add-form' form={form} labelCol={{ span: 6 }} wrapperCol={{ span: 18 }}>\n          <Form.Item label='Mã' name='code' rules={[{ required: true, message: 'Hãy nhập mã!' }]}>\n            <Input autoFocus />\n          </Form.Item>\n\n          <Form.Item label='Tên' name='name' rules={[{ required: true, message: 'Hãy nhập tên!' }]}>\n            <Input />\n          </Form.Item>\n\n          <Form.Item\n            label='Giá'\n            name='price'\n            rules={[{ required: true, message: 'Hãy nhập giá!' }]}\n          >\n            <InputNumber\n              style={{ width: '100%' }}\n              formatter={value => `${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}\n              parser={value => value!.replace(/\\s?VNĐ|(,*)/g, '')}\n            />\n          </Form.Item>\n\n          <Form.Item\n            label='Tiền cọc'\n            name='deposit'\n            rules={[{ required: true, message: 'Hãy nhập tiền cọc!' }]}\n            style={{ marginBottom: 0 }}\n          >\n            <InputNumber\n              style={{ width: '100%' }}\n              formatter={value => `${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}\n              parser={value => value!.replace(/\\s?VNĐ|(,*)/g, '')}\n            />\n          </Form.Item>\n        </Form>\n      </Modal>\n    );\n  }\n);\n\nexport default KindOfRoomModal;\n","import { FC, RefObject, useRef, useState } from 'react';\nimport { Button } from 'antd';\nimport { PageContainer } from '@ant-design/pro-layout';\nimport KindOfRoomGrid from './Grid';\nimport KindOfRoomModal from './Modal';\nimport { KindOfRoomGridRef, KindOfRoomModalRef, KindOfRoomPageProps } from './interface';\n\nconst KindOfRoomPage: FC<KindOfRoomPageProps> = ({ onChangeTourStep }) => {\n  const [edit, setEdit] = useState('');\n  const kindOfRoomGridRef: RefObject<KindOfRoomGridRef> = useRef(null);\n  const kindOfRoomModalRef: RefObject<KindOfRoomModalRef> = useRef(null);\n\n  const handleAdd = () => {\n    kindOfRoomModalRef.current!.openModal();\n    onChangeTourStep(2, 200);\n  };\n\n  const handleOk = () => {\n    if (edit) {\n      setEdit('');\n    }\n    kindOfRoomGridRef.current!.fetchData();\n\n    onChangeTourStep(3, 400);\n  };\n\n  return (\n    <PageContainer\n      extra={[\n        <Button type='primary' onClick={handleAdd}>\n          Thêm mới\n        </Button>\n      ]}\n      header={{ title: 'Quản lý loại phòng' }}\n    >\n      <KindOfRoomGrid\n        edit={id => setEdit(id)}\n        ref={kindOfRoomGridRef}\n        getKindOfRoomModalRef={() => kindOfRoomModalRef.current!}\n      />\n      <KindOfRoomModal\n        ref={kindOfRoomModalRef}\n        edit={edit}\n        onCancel={() => setEdit('')}\n        onOk={handleOk}\n      />\n    </PageContainer>\n  );\n};\n\nexport default KindOfRoomPage;\n","import { FC, useEffect, useState } from 'react';\nimport { v4 as uuidv4 } from 'uuid';\nimport moment from 'moment';\nimport { EditOutlined, DeleteOutlined } from '@ant-design/icons';\nimport { Button, Modal, Form, Input, message, Tooltip, InputNumber, DatePicker, Radio } from 'antd';\nimport { PageContainer } from '@ant-design/pro-layout';\nimport ProCard from '@ant-design/pro-card';\nimport { AgGridReact } from 'ag-grid-react';\nimport { ValueFormatterParams } from 'ag-grid-community';\n\nexport interface CustomerPageProps {\n  onChangeTourStep: (step: number, time?: number) => void;\n}\n\nconst CustomerPage: FC<CustomerPageProps> = ({ onChangeTourStep }) => {\n  const [visibleModal, setVisibleModal] = useState(false);\n  const [rowData, setRowData] = useState<ICustomer[]>([]);\n  const [edit, setEdit] = useState('');\n  const [form] = Form.useForm<\n    Omit<ICustomer, 'id' | 'dateOfBirth'> & { dateOfBirth: moment.Moment }\n  >();\n  const db = window.roomManagementSystemDB;\n\n  const fetchData = async () => {\n    setRowData(await db!.customer!.toArray());\n  };\n\n  useEffect(() => {\n    fetchData();\n    // eslint-disable-next-line\n  }, []);\n\n  const handleEdit = ({ dateOfBirth, ...rest }: ICustomer) => {\n    setEdit(rest.id);\n    setVisibleModal(true);\n    form.setFieldsValue({ dateOfBirth: dateOfBirth && moment(dateOfBirth), ...rest });\n  };\n\n  const handleModalOk = () => {\n    form.validateFields().then(async ({ dateOfBirth, ...rest }) => {\n      const data = await db!.customer!.where('code').equals(rest.code).toArray();\n      const value = { dateOfBirth: dateOfBirth?.valueOf(), ...rest };\n\n      if (data.filter(({ id }) => (edit ? edit !== id : id)).length > 0) {\n        message.error(`Khách hàng ${rest.fullName} đã tồn tại!`);\n        return;\n      }\n\n      if (edit) {\n        db!.customer!.update(edit, value).then(updated => {\n          if (updated) {\n            message.success('Cập nhật thành công!');\n            setVisibleModal(false);\n            setEdit('');\n            form.resetFields();\n            fetchData();\n          } else {\n            message.error('Cập nhật thất bại!');\n          }\n        });\n        return;\n      }\n\n      db!\n        .customer!.add({\n          id: uuidv4(),\n          ...value\n        })\n        .then(() => {\n          message.success('Tạo thành công!');\n          setVisibleModal(false);\n          form.resetFields();\n          fetchData();\n        });\n    });\n\n    onChangeTourStep(9, 200);\n  };\n\n  const handleModalCancel = () => {\n    setVisibleModal(false);\n    setEdit('');\n    form.resetFields();\n  };\n\n  const handleDeleteData = (data: ICustomer) => {\n    Modal.warning({\n      title: `Bạn có muốn xóa khách hàng ${data.fullName}?`,\n      onOk: () => {\n        db!\n          .customer!.where('code')\n          .equals(data.code)\n          .delete()\n          .then(() => {\n            message.success(`Xóa thành công!`);\n            fetchData();\n          });\n      }\n    });\n  };\n\n  const dateOfBirthValueFormatter = (params: ValueFormatterParams) =>\n    params.value && moment(+params.value).format('DD/MM/YYYY');\n\n  return (\n    <>\n      <PageContainer\n        extra={[\n          <Button\n            type='primary'\n            onClick={() => {\n              setVisibleModal(true);\n              onChangeTourStep(8, 400);\n            }}\n          >\n            Thêm mới\n          </Button>\n        ]}\n        header={{ title: 'Quản lý khách hàng' }}\n      >\n        <ProCard style={{ height: window.innerHeight - 168 }} className='ag-theme-alpine'>\n          <AgGridReact\n            animateRows\n            defaultColDef={{ floatingFilter: true, sortable: true, filter: true }}\n            columnDefs={[\n              { headerName: 'Mã', field: 'code', filter: 'agTextColumnFilter' },\n              {\n                headerName: 'Họ và tên',\n                field: 'fullName',\n                filter: 'agTextColumnFilter'\n              },\n              {\n                headerName: 'Số CMND',\n                field: 'identityCardNumber',\n                filter: 'agTextColumnFilter'\n              },\n              {\n                headerName: 'Ngày sinh',\n                field: 'dateOfBirth',\n                filterParams: {\n                  valueFormatter: dateOfBirthValueFormatter\n                },\n                valueFormatter: dateOfBirthValueFormatter\n              },\n              {\n                headerName: 'Giới tính',\n                field: 'sex',\n                filter: 'agTextColumnFilter'\n              },\n              {\n                headerName: 'Địa chỉ',\n                field: 'address',\n                filter: 'agTextColumnFilter'\n              },\n              {\n                headerName: 'Số điện thoại',\n                field: 'phoneNumber',\n                filter: 'agTextColumnFilter'\n              },\n              {\n                headerName: 'Nghề nghiệp',\n                field: 'job',\n                filter: 'agTextColumnFilter'\n              },\n              {\n                pinned: 'right',\n                field: '',\n                width: 100,\n                floatingFilter: false,\n                cellRendererFramework: (params: any) => (\n                  <>\n                    <Tooltip title='Chỉnh sửa'>\n                      <Button\n                        onClick={() => handleEdit(params.data)}\n                        icon={<EditOutlined />}\n                        style={{ marginRight: 8 }}\n                        type='primary'\n                      />\n                    </Tooltip>\n\n                    <Tooltip title='Xóa'>\n                      <Button\n                        icon={<DeleteOutlined />}\n                        danger\n                        onClick={() => handleDeleteData(params.data)}\n                      />\n                    </Tooltip>\n                  </>\n                )\n              }\n            ]}\n            rowData={rowData}\n          />\n        </ProCard>\n      </PageContainer>\n\n      <Modal\n        visible={visibleModal}\n        title={edit ? 'Chỉnh sửa' : 'Thêm khách hàng mới'}\n        centered\n        cancelText='Hủy'\n        onOk={handleModalOk}\n        onCancel={handleModalCancel}\n      >\n        <Form\n          name='add-form'\n          form={form}\n          labelCol={{ span: 6 }}\n          wrapperCol={{ span: 18 }}\n          initialValues={{ sex: 'Nam' }}\n        >\n          <Form.Item label='Mã' name='code' rules={[{ required: true, message: 'Hãy nhập mã!' }]}>\n            <Input autoFocus />\n          </Form.Item>\n\n          <Form.Item\n            label='Họ và tên'\n            name='fullName'\n            rules={[{ required: true, message: 'Hãy nhập họ và tên!' }]}\n          >\n            <Input />\n          </Form.Item>\n\n          <Form.Item\n            label='Số CMND'\n            name='identityCardNumber'\n            rules={[{ required: true, message: 'Hãy nhập số CMND!' }]}\n          >\n            <InputNumber style={{ width: '100%' }} />\n          </Form.Item>\n\n          <Form.Item label='Ngày sinh' name='dateOfBirth'>\n            <DatePicker style={{ width: '100%' }} format='DD/MM/YYYY' />\n          </Form.Item>\n\n          <Form.Item label='Giới tính' name='sex'>\n            <Radio.Group>\n              <Radio value='Nam'>Nam</Radio>\n              <Radio value='Nữ'>Nữ</Radio>\n              <Radio value='Khác'>Khác</Radio>\n            </Radio.Group>\n          </Form.Item>\n\n          <Form.Item label='Địa chỉ' name='address'>\n            <Input />\n          </Form.Item>\n\n          <Form.Item label='Số điện thoại' name='phoneNumber'>\n            <InputNumber style={{ width: '100%' }} />\n          </Form.Item>\n\n          <Form.Item label='Nghề nghiệp' name='job' style={{ marginBottom: 0 }}>\n            <Input />\n          </Form.Item>\n        </Form>\n      </Modal>\n    </>\n  );\n};\n\nexport default CustomerPage;\n","import { FC, useEffect, useState } from 'react';\nimport { v4 as uuidv4 } from 'uuid';\nimport { EditOutlined, DeleteOutlined } from '@ant-design/icons';\nimport { Button, Modal, Form, Input, message, Tooltip, Select, DatePicker } from 'antd';\nimport { PageContainer } from '@ant-design/pro-layout';\nimport ProCard from '@ant-design/pro-card';\nimport { AgGridReact } from 'ag-grid-react';\nimport moment from 'moment';\n\ninterface IForeignKey {\n  room: IRoom[];\n  customer: ICustomer[];\n}\n\nexport interface AgreementPageProps {\n  onChangeTourStep: (step: number, time?: number) => void;\n}\n\nconst AgreementPage: FC<AgreementPageProps> = ({ onChangeTourStep }) => {\n  const [visibleModal, setVisibleModal] = useState(false);\n  const [rowData, setRowData] = useState<IAgreement[]>([]);\n  const [edit, setEdit] = useState('');\n  const [form] = Form.useForm<Omit<IAgreement, 'id'>>();\n  const [foreignKey, setForeignKey] = useState<IForeignKey>({\n    room: [],\n    customer: []\n  });\n  const db = window.roomManagementSystemDB;\n\n  const fetchData = async () => {\n    setRowData(await db!.agreement!.toArray());\n  };\n\n  const fetchForeignKeyData = async () => {\n    const room = await db!.room!.toArray();\n    const customer = await db!.customer!.toArray();\n    setForeignKey({\n      room,\n      customer\n    });\n  };\n\n  useEffect(() => {\n    fetchData();\n    fetchForeignKeyData();\n    // eslint-disable-next-line\n  }, []);\n\n  const handleEdit = ({ date, ...rest }: Omit<IAgreement, 'date'> & { date: string }) => {\n    const tempDate = JSON.parse(date);\n    setEdit(rest.id);\n    setVisibleModal(true);\n    form.setFieldsValue({\n      date: [moment(tempDate[0]), moment(tempDate[1])],\n      ...rest\n    });\n  };\n\n  const handleModalOk = () => {\n    form.validateFields().then(async ({ date, ...rest }) => {\n      const value = { date: [date[0].valueOf(), date[1].valueOf()], ...rest };\n\n      const data = await db!.agreement!.where('code').equals(value.code).toArray();\n\n      if (data.filter(({ id }) => (edit ? edit !== id : id)).length > 0) {\n        message.error(`Hợp đồng ${value.code} đã tồn tại!`);\n        return;\n      }\n\n      const usedCustomers = rowData\n        .filter(agreement => (edit ? edit !== agreement.id : agreement.id))\n        .filter(\n          agreement =>\n            agreement.customerIds.filter(customerId => value.customerIds.includes(customerId))\n              .length > 0\n        );\n\n      const usedRooms = rowData\n        .filter(agreement => (edit ? edit !== agreement.id : agreement.id))\n        .filter(agreement => agreement.roomId === value.roomId);\n\n      if (usedRooms.length > 0) {\n        message.error(`Phòng đã được sử dụng!`);\n        return;\n      }\n\n      if (usedCustomers.length > 0) {\n        message.error(`Có khách hàng đang ở phòng khác!`);\n        return;\n      }\n\n      if (edit) {\n        db!.agreement!.update(edit, value).then(updated => {\n          if (updated) {\n            message.success('Cập nhật thành công!');\n            setVisibleModal(false);\n            setEdit('');\n            form.resetFields();\n            fetchData();\n          } else {\n            message.error('Cập nhật thất bại!');\n          }\n        });\n        return;\n      }\n\n      db!\n        .agreement!.add({\n          id: uuidv4(),\n          ...value\n        })\n        .then(async () => {\n          message.success('Tạo thành công!');\n          setVisibleModal(false);\n          form.resetFields();\n          await db!.room!.update(value.roomId, { stillEmpty: true });\n          fetchData();\n        });\n    });\n\n    onChangeTourStep(12, 200);\n  };\n\n  const handleModalCancel = () => {\n    setVisibleModal(false);\n    setEdit('');\n    form.resetFields();\n  };\n\n  const handleDeleteData = (data: IAgreement) => {\n    Modal.warning({\n      title: `Bạn có muốn xóa hợp đồng ${data.code}?`,\n      onOk: () => {\n        db!\n          .agreement!.where('code')\n          .equals(data.code)\n          .delete()\n          .then(async () => {\n            message.success(`Xóa thành công!`);\n            await db!.room!.update(data.roomId, { stillEmpty: false });\n            fetchData();\n          });\n      }\n    });\n  };\n\n  return (\n    <>\n      <PageContainer\n        extra={[\n          <Button\n            type='primary'\n            onClick={() => {\n              setVisibleModal(true);\n              onChangeTourStep(11, 400);\n            }}\n          >\n            Thêm mới\n          </Button>\n        ]}\n        header={{ title: 'Quản lý hợp đồng' }}\n      >\n        <ProCard style={{ height: window.innerHeight - 168 }} className='ag-theme-alpine'>\n          <AgGridReact\n            animateRows\n            defaultColDef={{ floatingFilter: true, sortable: true, filter: true, resizable: true }}\n            columnDefs={[\n              { headerName: 'Mã', field: 'code', filter: 'agTextColumnFilter' },\n              {\n                headerName: 'Phòng',\n                field: 'room',\n                filter: 'agTextColumnFilter'\n              },\n              {\n                headerName: 'Khách hàng',\n                field: 'customer',\n                filter: 'agTextColumnFilter'\n              },\n              {\n                headerName: 'Thời hạn',\n                field: 'formatDate',\n                filter: 'agTextColumnFilter'\n              },\n              {\n                pinned: 'right',\n                field: '',\n                width: 100,\n                floatingFilter: false,\n                cellRendererFramework: (params: any) => (\n                  <>\n                    <Tooltip title='Chỉnh sửa'>\n                      <Button\n                        onClick={() => handleEdit(params.data)}\n                        icon={<EditOutlined />}\n                        style={{ marginRight: 8 }}\n                        type='primary'\n                      />\n                    </Tooltip>\n\n                    <Tooltip title='Xóa'>\n                      <Button\n                        icon={<DeleteOutlined />}\n                        danger\n                        onClick={() => handleDeleteData(params.data)}\n                      />\n                    </Tooltip>\n                  </>\n                )\n              }\n            ]}\n            rowData={rowData.map(({ date, ...rest }) => ({\n              room: foreignKey.room!.find(room => room.id === rest.roomId)?.name,\n              date: JSON.stringify(date),\n              formatDate: `từ ${moment(date[0]).format('MM/YYYY')} đến ${moment(date[1]).format(\n                'MM/YYYY'\n              )}`,\n              customer: foreignKey.customer\n                .filter(customer => rest.customerIds.includes(customer.id))\n                .map(customer => customer.fullName)\n                .join(', '),\n              ...rest\n            }))}\n          />\n        </ProCard>\n      </PageContainer>\n\n      <Modal\n        visible={visibleModal}\n        title={edit ? 'Chỉnh sửa' : 'Thêm hợp đồng mới'}\n        centered\n        cancelText='Hủy'\n        onOk={handleModalOk}\n        onCancel={handleModalCancel}\n      >\n        <Form name='add-form' form={form} labelCol={{ span: 6 }} wrapperCol={{ span: 18 }}>\n          <Form.Item label='Mã' name='code' rules={[{ required: true, message: 'Hãy nhập mã!' }]}>\n            <Input autoFocus />\n          </Form.Item>\n\n          <Form.Item\n            label='Phòng'\n            name='roomId'\n            rules={[{ required: true, message: 'Hãy chọn phòng!' }]}\n          >\n            <Select>\n              {foreignKey.room!.map(room => (\n                <Select.Option value={room.id} key={room.id}>\n                  {room.name}\n                </Select.Option>\n              ))}\n            </Select>\n          </Form.Item>\n\n          <Form.Item\n            label='Khách hàng'\n            name='customerIds'\n            rules={[{ required: true, message: 'Hãy chọn khách hàng!' }]}\n          >\n            <Select mode='multiple'>\n              {foreignKey.customer!.map(customer => (\n                <Select.Option value={customer.id} key={customer.id}>\n                  {customer.fullName}\n                </Select.Option>\n              ))}\n            </Select>\n          </Form.Item>\n\n          <Form.Item\n            label='Thời hạn'\n            name='date'\n            style={{ marginBottom: 0 }}\n            rules={[{ required: true, message: 'Hãy chọn thời hạn!' }]}\n          >\n            <DatePicker.RangePicker\n              style={{ width: '100%' }}\n              picker='month'\n              format={['MM/YYYY', 'MM/YYYY']}\n              ranges={{\n                '1 tháng': [moment(), moment().add(1, 'months')],\n                '3 tháng': [moment(), moment().add(3, 'months')],\n                '6 tháng': [moment(), moment().add(6, 'months')],\n                '1 năm': [moment(), moment().add(12, 'months')]\n              }}\n            />\n          </Form.Item>\n        </Form>\n      </Modal>\n    </>\n  );\n};\n\nexport default AgreementPage;\n","import { FC, useEffect, useState } from 'react';\nimport { v4 as uuidv4 } from 'uuid';\nimport { EditOutlined, DeleteOutlined } from '@ant-design/icons';\nimport { Button, Modal, Form, InputNumber, message, Tooltip, DatePicker } from 'antd';\nimport { PageContainer } from '@ant-design/pro-layout';\nimport ProCard from '@ant-design/pro-card';\nimport { ValueFormatterParams } from 'ag-grid-community';\nimport { AgGridReact } from 'ag-grid-react';\nimport moment from 'moment';\n\nexport interface UnitPricePageProps {\n  onChangeTourStep: (step: number, time?: number) => void;\n}\n\nconst UnitPricePage: FC<UnitPricePageProps> = ({ onChangeTourStep }) => {\n  const [visibleModal, setVisibleModal] = useState(false);\n  const [rowData, setRowData] = useState<IUnitPrice[]>([]);\n  const [edit, setEdit] = useState('');\n  const [form] = Form.useForm<Omit<IUnitPrice, 'id' | 'code' | 'date'> & { date: moment.Moment }>();\n  const db = window.roomManagementSystemDB;\n  const formatter = new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'VND'\n  });\n\n  const fetchData = async () => {\n    setRowData(await db!.unitPrice!.toArray());\n  };\n\n  useEffect(() => {\n    fetchData();\n    // eslint-disable-next-line\n  }, []);\n\n  const handleEdit = ({ date, ...rest }: Omit<IRoom, 'date'> & { date: moment.Moment }) => {\n    setEdit(rest.id);\n    setVisibleModal(true);\n    form.setFieldsValue({\n      date: moment(date),\n      ...rest\n    });\n  };\n\n  const handleModalOk = () => {\n    form.validateFields().then(async ({ date, ...rest }) => {\n      const value = { date: date?.valueOf(), code: moment(date).format('MM/YYYY'), ...rest };\n\n      const data = await db!.unitPrice!.where('code').equals(value.code).toArray();\n\n      if (data.filter(({ id }) => (edit ? edit !== id : id)).length > 0) {\n        message.error(`Đơn giá tháng ${data[0].code} đã tồn tại!`);\n        return;\n      }\n\n      if (edit) {\n        db!.unitPrice!.update(edit, value).then(updated => {\n          if (updated) {\n            message.success('Cập nhật thành công!');\n            setVisibleModal(false);\n            setEdit('');\n            form.resetFields();\n            fetchData();\n          } else {\n            message.error('Cập nhật thất bại!');\n          }\n        });\n        return;\n      }\n\n      db!\n        .unitPrice!.add({\n          id: uuidv4(),\n          ...value\n        })\n        .then(() => {\n          message.success('Tạo thành công!');\n          setVisibleModal(false);\n          form.resetFields();\n          fetchData();\n        });\n    });\n\n    onChangeTourStep(15, 200);\n  };\n\n  const handleModalCancel = () => {\n    setVisibleModal(false);\n    setEdit('');\n    form.resetFields();\n  };\n\n  const handleDeleteData = (data: IUnitPrice) => {\n    Modal.warning({\n      title: `Bạn có muốn xóa đơn giá tháng ${data.code}?`,\n      onOk: () => {\n        db!\n          .unitPrice!.where('code')\n          .equals(data.code)\n          .delete()\n          .then(() => {\n            message.success(`Xóa thành công!`);\n            fetchData();\n          });\n      }\n    });\n  };\n\n  const dateValueFormatter = (params: ValueFormatterParams) =>\n    params.value && moment(+params.value).format('MM/YYYY');\n\n  return (\n    <>\n      <PageContainer\n        extra={[\n          <Button\n            type='primary'\n            onClick={() => {\n              setVisibleModal(true);\n              onChangeTourStep(14, 400);\n            }}\n          >\n            Thêm mới\n          </Button>\n        ]}\n        header={{ title: 'Quản lý đơn giá' }}\n      >\n        <ProCard style={{ height: window.innerHeight - 168 }} className='ag-theme-alpine'>\n          <AgGridReact\n            animateRows\n            defaultColDef={{ floatingFilter: true, sortable: true, filter: true }}\n            columnDefs={[\n              {\n                headerName: 'Đơn giá điện',\n                field: 'electricity',\n                filter: 'agTextColumnFilter',\n                valueFormatter: params => formatter.format(params.value)\n              },\n              {\n                headerName: 'Đơn giá nước',\n                field: 'water',\n                filter: 'agTextColumnFilter',\n                valueFormatter: params => formatter.format(params.value)\n              },\n              {\n                headerName: 'Tiền giữ xe',\n                field: 'parking',\n                filter: 'agTextColumnFilter',\n                valueFormatter: params => formatter.format(params.value)\n              },\n              {\n                headerName: 'Tiền rác',\n                field: 'junkMoney',\n                filter: 'agTextColumnFilter',\n                valueFormatter: params => formatter.format(params.value)\n              },\n              {\n                headerName: 'Thời gian',\n                field: 'date',\n                filterParams: {\n                  valueFormatter: dateValueFormatter\n                },\n                valueFormatter: dateValueFormatter\n              },\n              {\n                pinned: 'right',\n                field: '',\n                width: 100,\n                floatingFilter: false,\n                cellRendererFramework: (params: any) => {\n                  if (moment().isAfter(moment(params.data.date), 'months')) {\n                    return null;\n                  }\n\n                  return (\n                    <>\n                      <Tooltip title='Chỉnh sửa'>\n                        <Button\n                          onClick={() => handleEdit(params.data)}\n                          icon={<EditOutlined />}\n                          style={{ marginRight: 8 }}\n                          type='primary'\n                        />\n                      </Tooltip>\n\n                      <Tooltip title='Xóa'>\n                        <Button\n                          icon={<DeleteOutlined />}\n                          danger\n                          onClick={() => handleDeleteData(params.data)}\n                        />\n                      </Tooltip>\n                    </>\n                  );\n                }\n              }\n            ]}\n            rowData={rowData}\n          />\n        </ProCard>\n      </PageContainer>\n\n      <Modal\n        visible={visibleModal}\n        title={edit ? 'Chỉnh sửa' : 'Thêm đơn giá mới'}\n        centered\n        cancelText='Hủy'\n        onOk={handleModalOk}\n        onCancel={handleModalCancel}\n      >\n        <Form name='add-form' form={form} labelCol={{ span: 6 }} wrapperCol={{ span: 18 }}>\n          <Form.Item\n            label='Đơn giá Điện'\n            name='electricity'\n            rules={[{ required: true, message: 'Hãy nhập đơn giá điện!' }]}\n          >\n            <InputNumber\n              style={{ width: '100%' }}\n              formatter={value => `${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}\n              parser={value => value!.replace(/\\s?VNĐ|(,*)/g, '')}\n            />\n          </Form.Item>\n\n          <Form.Item\n            label='Đơn giá nước'\n            name='water'\n            rules={[{ required: true, message: 'Hãy nhập đơn giá nước!' }]}\n          >\n            <InputNumber\n              style={{ width: '100%' }}\n              formatter={value => `${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}\n              parser={value => value!.replace(/\\s?VNĐ|(,*)/g, '')}\n            />\n          </Form.Item>\n\n          <Form.Item\n            label='Tiền giữ xe'\n            name='parking'\n            rules={[{ required: true, message: 'Hãy nhập tiền xe!' }]}\n          >\n            <InputNumber\n              style={{ width: '100%' }}\n              formatter={value => `${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}\n              parser={value => value!.replace(/\\s?VNĐ|(,*)/g, '')}\n            />\n          </Form.Item>\n\n          <Form.Item\n            label='Tiền rác'\n            name='junkMoney'\n            rules={[{ required: true, message: 'Hãy nhập tiền rác!' }]}\n          >\n            <InputNumber\n              style={{ width: '100%' }}\n              formatter={value => `${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}\n              parser={value => value!.replace(/\\s?VNĐ|(,*)/g, '')}\n            />\n          </Form.Item>\n\n          <Form.Item\n            label='Thời gian'\n            name='date'\n            style={{ marginBottom: 0 }}\n            rules={[{ required: true, message: 'Hãy chọn thời gian!' }]}\n          >\n            <DatePicker style={{ width: '100%' }} picker='month' format='MM/YYYY' />\n          </Form.Item>\n        </Form>\n      </Modal>\n    </>\n  );\n};\n\nexport default UnitPricePage;\n","import { createRef, FC, useEffect, useState } from 'react';\nimport { v4 as uuidv4 } from 'uuid';\nimport { EditOutlined, DeleteOutlined, PrinterOutlined } from '@ant-design/icons';\nimport {\n  Button,\n  Modal,\n  Form,\n  InputNumber,\n  Input,\n  message,\n  Tooltip,\n  DatePicker,\n  Select\n} from 'antd';\nimport { PageContainer } from '@ant-design/pro-layout';\nimport ProCard from '@ant-design/pro-card';\nimport { AgGridReact } from 'ag-grid-react';\nimport moment from 'moment';\nimport ReactToPrint from 'react-to-print';\nimport './style';\n\ninterface IForeignKey {\n  room: IRoom[];\n  unitPrice: IUnitPrice[];\n}\n\ninterface IPrintData {\n  room: string;\n  electricityBill: string;\n  amountOfElectricity: string;\n  waterBill: string;\n  amountOfWater: string;\n  parkingFee: string;\n  junkMoney: string;\n  total: string;\n}\n\nexport interface BillPageProps {\n  onChangeTourStep: (step: number, time?: number) => void;\n}\n\nconst BillPage: FC<BillPageProps> = ({ onChangeTourStep }) => {\n  const [visibleModal, setVisibleModal] = useState(false);\n  const [rowData, setRowData] = useState<IBill[]>([]);\n  const [edit, setEdit] = useState('');\n  const [form] = Form.useForm<\n    Omit<IBill, 'formatDate' | 'id' | 'date'> & { date: moment.Moment }\n  >();\n  const [foreignKey, setForeignKey] = useState<IForeignKey>({\n    room: [],\n    unitPrice: []\n  });\n  const db = window.roomManagementSystemDB;\n  const formatter = new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'VND'\n  });\n\n  const fetchData = async () => {\n    setRowData(await db!.bill!!.toArray());\n  };\n\n  const fetchForeignKeyData = async () => {\n    const room = await db!.room!.toArray();\n    const unitPrice = await db!.unitPrice!.toArray();\n    setForeignKey({\n      room,\n      unitPrice\n    });\n  };\n\n  useEffect(() => {\n    fetchData();\n    fetchForeignKeyData();\n    // eslint-disable-next-line\n  }, []);\n\n  const handleEdit = ({ date, ...rest }: IBill) => {\n    setEdit(rest.id);\n    setVisibleModal(true);\n    form.setFieldsValue({\n      date: moment(date),\n      ...rest\n    });\n  };\n\n  const handleModalOk = () => {\n    form.validateFields().then(async ({ date, ...rest }) => {\n      const value = { date: date.valueOf(), ...rest };\n      const data = await db!.bill!.where('code').equals(value.code).toArray();\n\n      if (data.filter(({ id }) => (edit ? edit !== id : id)).length > 0) {\n        message.error(`Hóa đơn ${value.code} đã tồn tại!`);\n        return;\n      }\n\n      const formatDate = moment(value.date).format('MM/YYYY');\n      const usedRoom = await db!.bill!.where({ roomId: value.roomId, formatDate }).toArray();\n\n      if (usedRoom.length) {\n        message.error('Có phòng đã được lập hóa đơn!');\n        return;\n      }\n\n      if (edit) {\n        db!.bill!.update(edit, { ...value }).then(updated => {\n          if (updated) {\n            message.success('Cập nhật thành công!');\n            setVisibleModal(false);\n            setEdit('');\n            form.resetFields();\n            fetchData();\n          } else {\n            message.error('Cập nhật thất bại!');\n          }\n        });\n        return;\n      }\n\n      db!\n        .bill!.add({\n          id: uuidv4(),\n          formatDate: moment(value.date).format('MM/YYYY'),\n          ...value\n        })\n        .then(() => {\n          message.success('Tạo thành công!');\n          setVisibleModal(false);\n          form.resetFields();\n          fetchData();\n        });\n    });\n    onChangeTourStep(18, 200);\n  };\n\n  const handleModalCancel = () => {\n    setVisibleModal(false);\n    setEdit('');\n    form.resetFields();\n  };\n\n  const handleDeleteData = (data: IBill) => {\n    Modal.warning({\n      title: `Bạn có muốn xóa hóa đơn ${data.code}?`,\n      onOk: () => {\n        db!\n          .bill!.where('code')\n          .equals(data.code)\n          .delete()\n          .then(() => {\n            message.success(`Xóa thành công!`);\n            fetchData();\n          });\n      }\n    });\n  };\n\n  return (\n    <>\n      <PageContainer\n        extra={[\n          <Button\n            type='primary'\n            onClick={() => {\n              setVisibleModal(true);\n              onChangeTourStep(17, 400);\n            }}\n          >\n            Thêm mới\n          </Button>\n        ]}\n        header={{ title: 'Quản lý hóa đơn' }}\n      >\n        <ProCard style={{ height: window.innerHeight - 168 }} className='ag-theme-alpine'>\n          <AgGridReact\n            animateRows\n            defaultColDef={{ floatingFilter: true, sortable: true, filter: true, resizable: true }}\n            groupMultiAutoColumn\n            enableRangeSelection\n            columnDefs={[\n              { headerName: 'Thời gian', field: 'formatDate', rowGroup: true, hide: true },\n              { headerName: 'Mã', field: 'code', filter: 'agTextColumnFilter' },\n              {\n                headerName: 'Phòng',\n                field: 'room',\n                filter: 'agTextColumnFilter'\n              },\n              {\n                headerName: 'Số lượng điện tiêu thụ',\n                field: 'amountOfElectricity',\n                filter: 'agTextColumnFilter'\n              },\n              {\n                headerName: 'Số lượng nước tiêu thụ',\n                field: 'amountOfWater',\n                filter: 'agTextColumnFilter'\n              },\n              {\n                headerName: 'Số lượng xe',\n                field: 'numberOfVehicles',\n                filter: 'agTextColumnFilter'\n              },\n              {\n                headerName: 'Tiền điện',\n                field: 'electricityBill',\n                filter: 'agTextColumnFilter'\n              },\n              {\n                headerName: 'Tiền nước',\n                field: 'waterBill',\n                filter: 'agTextColumnFilter'\n              },\n              {\n                headerName: 'Tiền giữ xe',\n                field: 'parkingFee',\n                filter: 'agTextColumnFilter'\n              },\n              {\n                headerName: 'Tiền rác',\n                field: 'junkMoney',\n                filter: 'agTextColumnFilter'\n              },\n              {\n                headerName: 'Tổng',\n                field: 'total',\n                filter: 'agTextColumnFilter'\n              },\n              {\n                pinned: 'right',\n                field: '',\n                width: 100,\n                floatingFilter: false,\n                cellRendererFramework: (params: any) => {\n                  if (!params.data) {\n                    const printData: IPrintData[] = params.node?.allLeafChildren?.map(\n                      (child: any) => child.data\n                    );\n                    const printRef = createRef<any>();\n\n                    return (\n                      <>\n                        <ReactToPrint\n                          trigger={() => <Button icon={<PrinterOutlined />} />}\n                          content={() => printRef.current}\n                        />\n                        <div style={{ display: 'none' }}>\n                          <div ref={printRef}>\n                            <style>\n                              {`\n                              #print-container {\n                                padding: 16px;\n                              }\n\n                              #print-container h2 {\n                                font-weight: bold;\n                                text-align: center;\n                              }\n\n                              #print-container table, th, td {\n                                border: 1px solid black;\n                                font-size: 14px;\n                              }\n\n                              #print-container table {\n                                width: 100%;\n                                border-collapse: collapse;\n                              }\n                            `}\n                            </style>\n                            <div id='print-container'>\n                              <h2>Tháng {params.node.key}</h2>\n\n                              <table cellPadding={8}>\n                                <tr>\n                                  <th rowSpan={2}>SP</th>\n                                  <th colSpan={2}>TIỀN ĐIỆN</th>\n                                  <th colSpan={2}>TIỀN NƯỚC</th>\n                                  <th rowSpan={2}>TIỀN XE</th>\n                                  <th rowSpan={2}>TIỀN RÁC</th>\n                                  <th rowSpan={2}>TỔNG CỘNG</th>\n                                  <th rowSpan={2}>SP</th>\n                                </tr>\n\n                                <tr>\n                                  <th>TIÊU THỤ (kW)</th>\n                                  <th>THÀNH TIỀN</th>\n                                  <th>TIÊU THỤ (m3)</th>\n                                  <th>THÀNH TIỀN</th>\n                                </tr>\n\n                                {printData.map((data, index) => (\n                                  <tr key={index}>\n                                    <td>{data.room}</td>\n                                    <td>{data.amountOfElectricity}</td>\n                                    <td>{data.electricityBill}</td>\n                                    <td>{data.amountOfWater}</td>\n                                    <td>{data.waterBill}</td>\n                                    <td>{data.parkingFee}</td>\n                                    <td>{data.junkMoney}</td>\n                                    <td>{data.total}</td>\n                                    <td>{data.room}</td>\n                                  </tr>\n                                ))}\n                              </table>\n                            </div>\n                          </div>\n                        </div>\n                      </>\n                    );\n                  }\n\n                  if (!params.data || (params.data && moment().isAfter(moment(params.data.date)))) {\n                    return null;\n                  }\n\n                  return (\n                    <>\n                      <Tooltip title='Chỉnh sửa'>\n                        <Button\n                          onClick={() => handleEdit(params.data)}\n                          icon={<EditOutlined />}\n                          style={{ marginRight: 8 }}\n                          type='primary'\n                        />\n                      </Tooltip>\n\n                      <Tooltip title='Xóa'>\n                        <Button\n                          icon={<DeleteOutlined />}\n                          danger\n                          onClick={() => handleDeleteData(params.data)}\n                        />\n                      </Tooltip>\n                    </>\n                  );\n                }\n              }\n            ]}\n            rowData={rowData.map(data => {\n              const unitPrice = foreignKey.unitPrice.find(price => price.code === data.formatDate);\n              const electricityBill = unitPrice\n                ? unitPrice.electricity * data.amountOfElectricity\n                : 0;\n              const waterBill = unitPrice ? unitPrice.water * data.amountOfWater : 0;\n              const parkingFee = unitPrice ? unitPrice.parking * data.numberOfVehicles : 0;\n              const junkMoney = unitPrice?.junkMoney || 0;\n              const room = foreignKey.room.find(room => room.id === data.roomId)?.name;\n              const total = electricityBill + waterBill + parkingFee + junkMoney;\n\n              return {\n                room,\n                electricityBill: formatter.format(electricityBill),\n                waterBill: formatter.format(waterBill),\n                parkingFee: formatter.format(parkingFee),\n                junkMoney: formatter.format(junkMoney),\n                total: formatter.format(total),\n                ...data\n              };\n            })}\n          />\n        </ProCard>\n      </PageContainer>\n\n      <Modal\n        visible={visibleModal}\n        title={edit ? 'Chỉnh sửa' : 'Thêm hóa đơn mới'}\n        centered\n        cancelText='Hủy'\n        onOk={handleModalOk}\n        onCancel={handleModalCancel}\n      >\n        <Form name='add-form' form={form} labelCol={{ span: 8 }} wrapperCol={{ span: 16 }}>\n          <Form.Item label='Mã' name='code' rules={[{ required: true, message: 'Hãy nhập mã!' }]}>\n            <Input autoFocus />\n          </Form.Item>\n\n          <Form.Item\n            label='Phòng'\n            name='roomId'\n            rules={[{ required: true, message: 'Hãy chọn phòng!' }]}\n          >\n            <Select>\n              {foreignKey.room.map(room => (\n                <Select.Option value={room.id} key={room.id}>\n                  {room.name}\n                </Select.Option>\n              ))}\n            </Select>\n          </Form.Item>\n\n          <Form.Item\n            label='Số lượng điện tiêu thụ'\n            name='amountOfElectricity'\n            rules={[{ required: true, message: 'Hãy nhập số lượng điện tiêu thụ!' }]}\n          >\n            <InputNumber style={{ width: '100%' }} />\n          </Form.Item>\n\n          <Form.Item\n            label='Số lượng nước tiêu thụ'\n            name='amountOfWater'\n            rules={[{ required: true, message: 'Hãy nhập số lượng nước tiêu thụ!' }]}\n          >\n            <InputNumber style={{ width: '100%' }} />\n          </Form.Item>\n\n          <Form.Item\n            label='Số lượng xe'\n            name='numberOfVehicles'\n            rules={[{ required: true, message: 'Hãy nhập số lượng xe!' }]}\n          >\n            <InputNumber style={{ width: '100%' }} />\n          </Form.Item>\n\n          <Form.Item\n            label='Thời gian'\n            name='date'\n            style={{ marginBottom: 0 }}\n            rules={[{ required: true, message: 'Hãy chọn thời gian!' }]}\n          >\n            <DatePicker style={{ width: '100%' }} picker='month' format='MM/YYYY' />\n          </Form.Item>\n        </Form>\n      </Modal>\n    </>\n  );\n};\n\nexport default BillPage;\n","import { FC, useEffect, useState } from 'react';\nimport { v4 as uuidv4 } from 'uuid';\nimport { EditOutlined, DeleteOutlined } from '@ant-design/icons';\nimport { Button, Modal, Form, InputNumber, Input, message, Tooltip } from 'antd';\nimport { PageContainer } from '@ant-design/pro-layout';\nimport ProCard from '@ant-design/pro-card';\nimport { AgGridReact } from 'ag-grid-react';\n\nconst EquipmentRoom: FC = () => {\n  const [visibleModal, setVisibleModal] = useState(false);\n  const [rowData, setRowData] = useState<IEquipment[]>([]);\n  const [edit, setEdit] = useState('');\n  const [form] = Form.useForm<Omit<IEquipment, 'id'>>();\n  const db = window.roomManagementSystemDB;\n\n  const fetchData = async () => {\n    setRowData(await db!.equipment!.toArray());\n  };\n\n  useEffect(() => {\n    fetchData();\n    // eslint-disable-next-line\n  }, []);\n\n  const handleEdit = (data: IEquipment) => {\n    setEdit(data.id);\n    setVisibleModal(true);\n    form.setFieldsValue(data);\n  };\n\n  const handleModalOk = () => {\n    form.validateFields().then(async value => {\n      const data = await db!.equipment!.where('code').equals(value.code).toArray();\n\n      if (data.filter(({ id }) => (edit ? edit !== id : id)).length > 0) {\n        message.error(`${value.name} đã tồn tại!`);\n        return;\n      }\n\n      if (edit) {\n        db!.equipment!.update(edit, value).then(updated => {\n          if (updated) {\n            message.success('Cập nhật thành công!');\n            setVisibleModal(false);\n            setEdit('');\n            form.resetFields();\n            fetchData();\n          } else {\n            message.error('Cập nhật thất bại!');\n          }\n        });\n        return;\n      }\n\n      db!\n        .equipment!.add({\n          id: uuidv4(),\n          ...value\n        })\n        .then(() => {\n          message.success('Tạo thành công!');\n          setVisibleModal(false);\n          form.resetFields();\n          fetchData();\n        });\n    });\n  };\n\n  const handleModalCancel = () => {\n    setVisibleModal(false);\n    setEdit('');\n    form.resetFields();\n  };\n\n  const handleDeleteData = (data: IEquipment) => {\n    Modal.warning({\n      title: `Bạn có muốn xóa ${data.name}?`,\n      onOk: () => {\n        db!\n          .equipment!.where('code')\n          .equals(data.code)\n          .delete()\n          .then(() => {\n            message.success(`Xóa thành công!`);\n            fetchData();\n          });\n      }\n    });\n  };\n\n  return (\n    <>\n      <PageContainer\n        extra={[\n          <Button type='primary' onClick={() => setVisibleModal(true)}>\n            Thêm mới\n          </Button>\n        ]}\n        header={{ title: 'Quản lý trang thiết bị' }}\n      >\n        <ProCard style={{ height: window.innerHeight - 168 }} className='ag-theme-alpine'>\n          <AgGridReact\n            animateRows\n            defaultColDef={{ floatingFilter: true, sortable: true, filter: true }}\n            columnDefs={[\n              { headerName: 'Mã', field: 'code', filter: 'agTextColumnFilter' },\n              {\n                headerName: 'Tên',\n                field: 'name',\n                filter: 'agTextColumnFilter'\n              },\n              {\n                headerName: 'Số lượng',\n                field: 'number',\n                filter: 'agTextColumnFilter'\n              },\n              {\n                pinned: 'right',\n                field: '',\n                width: 100,\n                floatingFilter: false,\n                cellRendererFramework: (params: any) => (\n                  <>\n                    <Tooltip title='Chỉnh sửa'>\n                      <Button\n                        onClick={() => handleEdit(params.data)}\n                        icon={<EditOutlined />}\n                        style={{ marginRight: 8 }}\n                        type='primary'\n                      />\n                    </Tooltip>\n\n                    <Tooltip title='Xóa'>\n                      <Button\n                        icon={<DeleteOutlined />}\n                        danger\n                        onClick={() => handleDeleteData(params.data)}\n                      />\n                    </Tooltip>\n                  </>\n                )\n              }\n            ]}\n            rowData={rowData}\n          />\n        </ProCard>\n      </PageContainer>\n\n      <Modal\n        visible={visibleModal}\n        title={edit ? 'Chỉnh sửa' : 'Thêm trang thiết bị mới mới'}\n        centered\n        cancelText='Hủy'\n        onOk={handleModalOk}\n        onCancel={handleModalCancel}\n      >\n        <Form name='add-form' form={form} labelCol={{ span: 6 }} wrapperCol={{ span: 18 }}>\n          <Form.Item label='Mã' name='code' rules={[{ required: true, message: 'Hãy nhập mã!' }]}>\n            <Input autoFocus />\n          </Form.Item>\n\n          <Form.Item label='Tên' name='name' rules={[{ required: true, message: 'Hãy nhập tên!' }]}>\n            <Input />\n          </Form.Item>\n\n          <Form.Item\n            label='Số lương'\n            name='number'\n            rules={[{ required: true, message: 'Hãy nhập số lượng!' }]}\n          >\n            <InputNumber style={{ width: '100%' }} />\n          </Form.Item>\n        </Form>\n      </Modal>\n    </>\n  );\n};\n\nexport default EquipmentRoom;\n","import { FC, useContext, useEffect, useRef, useState } from 'react';\nimport { Avatar, Menu, Dropdown, Modal } from 'antd';\nimport type { MenuClickEventHandler } from 'rc-menu/lib/interface';\nimport { UserOutlined, LogoutOutlined } from '@ant-design/icons';\nimport ProLayout from '@ant-design/pro-layout';\nimport { Link, Switch, Route, BrowserRouter } from 'react-router-dom';\nimport { routes } from './routes';\nimport { tourSteps } from './tourSteps';\nimport { AuthenticationContext } from '../authentication-provider';\nimport AnalysisPage from '../analysis';\nimport RoomPage from '../room';\nimport KindOfRoomPage from '../kind-of-room';\nimport CustomerPage from '../customer';\nimport AgreementPage from '../agreement';\nimport UnitPricePage from '../unitPrice';\nimport BillPage from '../bill';\nimport EquipmentPage from '../equipment';\nimport Tour from 'reactour';\n\nconst Dashboard: FC = () => {\n  const [tourStep, setTourStep] = useState(0);\n  const [isTourOpen, setIsTourOpen] = useState(false);\n  const [pathname, setPathname] = useState('/analysis');\n  const { setAuthenticate } = useContext(AuthenticationContext);\n  const timeout = useRef<any>(null);\n  const hasTourGuide = useRef(localStorage.getItem('TOUR_GUIDE'));\n\n  useEffect(() => {\n    if (!hasTourGuide.current) {\n      localStorage.setItem('TOUR_GUIDE', 'TOUR_GUIDE');\n      Modal.confirm({\n        content: 'Bắt đầu hướng dẫn?',\n        onOk: () => {\n          setIsTourOpen(true);\n        }\n      });\n    }\n  }, []);\n\n  const handleTourClose = () => {\n    if (timeout.current) {\n      clearTimeout(timeout.current);\n      timeout.current = null;\n    }\n    timeout.current = setTimeout(() => {\n      setIsTourOpen(false);\n    }, 3000);\n  };\n\n  const handleListItemClick = (path: string) => {\n    setPathname(path!);\n\n    if (hasTourGuide.current) {\n      return;\n    }\n    if (path === '/kind-of-room') {\n      setTourStep(1);\n    }\n\n    if (path === '/room') {\n      setTourStep(4);\n    }\n\n    if (path === '/customer') {\n      setTourStep(7);\n    }\n\n    if (path === '/agreement') {\n      setTourStep(10);\n    }\n\n    if (path === '/unit-price') {\n      setTourStep(13);\n    }\n\n    if (path === '/bill') {\n      setTourStep(16);\n    }\n\n    if (path === '/analysis' && tourStep === 18) {\n      setTourStep(19);\n      handleTourClose();\n    }\n  };\n\n  const handleUserMenuClick: MenuClickEventHandler = e => {\n    if (e.key === 'logout') {\n      setAuthenticate(false);\n      localStorage.removeItem('access-token');\n    }\n  };\n\n  const renderUserMenu = () => (\n    <Menu onClick={handleUserMenuClick}>\n      <Menu.Item key='logout' icon={<LogoutOutlined />}>\n        Đăng xuất\n      </Menu.Item>\n    </Menu>\n  );\n\n  const handleChangeTourStep = (step: number, time?: number) => {\n    if (time) {\n      if (timeout.current) {\n        clearTimeout(timeout.current);\n        timeout.current = null;\n      }\n\n      timeout.current = setTimeout(() => {\n        setTourStep(step);\n      }, time);\n    } else {\n      setTourStep(step);\n    }\n  };\n\n  return (\n    <BrowserRouter basename='/room-management-system'>\n      <ProLayout\n        {...routes}\n        location={{\n          pathname\n        }}\n        title='Quản lý phòng trọ'\n        logo={null}\n        rightContentRender={() => (\n          <Dropdown overlay={renderUserMenu()}>\n            <Avatar size='small' icon={<UserOutlined />} />\n          </Dropdown>\n        )}\n        menuItemRender={(item, dom) => (\n          <Link to={item.path!} onClick={() => handleListItemClick(item.path!)}>\n            {dom}\n          </Link>\n        )}\n        fixSiderbar\n      >\n        <Switch>\n          <Route render={() => <AnalysisPage />} key='analysis' path='/analysis' />\n          <Route\n            render={() => <RoomPage onChangeTourStep={handleChangeTourStep} />}\n            key='room'\n            path='/room'\n          />\n          <Route\n            render={() => <CustomerPage onChangeTourStep={handleChangeTourStep} />}\n            key='customer'\n            path='/customer'\n          />\n          <Route\n            render={() => <AgreementPage onChangeTourStep={handleChangeTourStep} />}\n            key='agreement'\n            path='/agreement'\n          />\n          <Route\n            render={() => <KindOfRoomPage onChangeTourStep={handleChangeTourStep} />}\n            key='kind-of-room'\n            path='/kind-of-room'\n          />\n          <Route\n            render={() => <UnitPricePage onChangeTourStep={handleChangeTourStep} />}\n            key='unit-price'\n            path='/unit-price'\n          />\n          <Route\n            render={() => <BillPage onChangeTourStep={handleChangeTourStep} />}\n            key='bill'\n            path='/bill'\n          />\n          <Route render={() => <EquipmentPage />} key='equipment' path='/equipment' />\n        </Switch>\n        <Tour\n          steps={tourSteps}\n          disableFocusLock\n          showCloseButton={false}\n          showButtons={false}\n          showNavigation={false}\n          goToStep={tourStep}\n          isOpen={isTourOpen}\n          disableKeyboardNavigation\n          onRequestClose={() => setIsTourOpen(false)}\n        />\n      </ProLayout>\n    </BrowserRouter>\n  );\n};\n\nexport default Dashboard;\n","import { useContext } from 'react';\nimport { BrowserRouter, Redirect, Route, Switch } from 'react-router-dom';\nimport { AuthenticationContext } from './authentication-provider';\nimport LoginPage from './login';\nimport Dashboard from './dashboard';\n\nconst App = () => {\n  const { authenticate } = useContext(AuthenticationContext);\n\n  return (\n    <BrowserRouter basename='/room-management-system'>\n      <Switch>\n        <Route\n          path='/'\n          render={routeProps => {\n            if (authenticate) {\n              return (\n                <Switch>\n                  <Route exact path='/analysis' key='analysis' render={() => <Dashboard />} />\n                  <Redirect to='/analysis' />\n                </Switch>\n              );\n            }\n\n            return (\n              <Switch>\n                <Route\n                  exact\n                  path='/login'\n                  key='login'\n                  render={() => <LoginPage {...routeProps} />}\n                />\n                <Redirect to='/login' />\n              </Switch>\n            );\n          }}\n        />\n      </Switch>\n    </BrowserRouter>\n  );\n};\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Dexie from 'dexie';\nimport { ConfigProvider } from 'antd';\nimport { LicenseManager } from 'ag-grid-enterprise';\nimport viVN from 'antd/lib/locale/vi_VN';\nimport 'moment/locale/vi';\nimport App from './App';\nimport AuthenticationProvider from './authentication-provider';\nimport reportWebVitals from './reportWebVitals';\nimport './style';\n\nLicenseManager.setLicenseKey('NDEwMjMzMzIwMDAwMA==4776ae9eddc069aad222a64b09b9e834');\n\nwindow.roomManagementSystemDB = new Dexie('room-management-system');\nwindow.roomManagementSystemDB!.version(1).stores({\n  account: 'id,username,password',\n  room: 'id,code,name,stillEmpty,kindOfRoomId',\n  kindOfRoom: 'id,code,name,price,deposit',\n  agreement: 'id,code,roomId,customerIds,date',\n  customer: 'id,code,fullName,identityCardNumber,dateOfBirth,sex,address,phoneNumber,job',\n  unitPrice: 'id,code,water,electricity,parking,junkMoney,date',\n  bill: 'id,code,amountOfWater,amountOfElectricity,numberOfVehicles,date,formatDate,roomId',\n  equipment: 'id,code,name,number'\n});\n\nReactDOM.render(\n  <React.StrictMode>\n    <ConfigProvider locale={viVN}>\n      <AuthenticationProvider>\n        <App />\n      </AuthenticationProvider>\n    </ConfigProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}