(this["webpackJsonproom-management-system"]=this["webpackJsonproom-management-system"]||[]).push([[0],{1092:function(e,t,n){},1097:function(e,t,n){"use strict";n.r(t);n(667);var a=n(39),r=n.n(a),c=n(0),i=n.n(c),o=n(70),s=n.n(o),l=n(619),u=n(620),d=n(647),m=n.n(d),h=(n(673),n(53)),j=n(267),f=n(81),b=n(30),O=n(328),p=n(5),g=Object(c.createContext)({authenticate:!1,setAuthenticate:function(){}}),x=function(e){var t=e.children,n=localStorage.getItem("access-token"),a=Object(c.useState)(!!n&&Object(O.verify)(n,"s3cr3t!@#")),r=Object(b.a)(a,2),i=r[0],o=r[1];return Object(p.jsx)(g.Provider,{value:{authenticate:i,setAuthenticate:o},children:t})},y=(n(109),n(51)),v=n.n(y),w=(n(792),n(622)),k=n.n(w),F=(n(162),n(83)),C=n.n(F),T=n(25),N=n.n(T),S=(n(155),n(36)),M=n.n(S),I=n(54),R=(n(163),n(26)),Y=n.n(R),D=n(1106),q=n(1107),B=n(1108),H=n(416),A=(n(800),function(){var e=Y.a.useForm(),t=Object(b.a)(e,1)[0],n=Object(c.useState)(!1),a=Object(b.a)(n,2),r=a[0],i=a[1],o=Object(c.useContext)(g).setAuthenticate,s=window.roomManagementSystemDB,l=function(){t.validateFields().then(function(){var e=Object(I.a)(N.a.mark((function e(n){var a,c,l,u,d;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.username,c=n.password,l=n.remember,e.next=3,s.account.where("username").equals(a).toArray();case 3:u=e.sent,r?u.length>0?M.a.error("T\xe0i kho\u1ea3n \u0111\xe3 t\u1ed3n t\u1ea1i!"):s.account.add({id:Object(D.a)(),username:a,password:Object(H.hashSync)(c,11)}).then((function(){M.a.success("T\u1ea1o t\xe0i kho\u1ea3n th\xe0nh c\xf4ng!"),i(!1),t.resetFields()})):u.length>0&&Object(H.compareSync)(c,u[0].password)?(d=Object(O.sign)({username:a,password:c},"s3cr3t!@#",{expiresIn:"7d"}),o(!0),l&&localStorage.setItem("access-token",d)):M.a.error("T\xean \u0111\u0103ng nh\u1eadp ho\u1eb7c m\u1eadt kh\u1ea9u sai!");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())};return Object(p.jsx)("div",{className:"login-page",children:Object(p.jsxs)("div",{className:"login-box",children:[Object(p.jsx)("div",{className:"login-title",children:r?"\u0110\u0103ng k\xed":"\u0110\u0103ng nh\u1eadp"}),Object(p.jsxs)(Y.a,{name:"normal_login",className:"login-form",form:t,children:[Object(p.jsx)(Y.a.Item,{name:"username",rules:[{required:!0,message:"H\xe3y nh\u1eadp t\xean \u0111\u0103ng nh\u1eadp c\u1ee7a b\u1ea1n!"}],children:Object(p.jsx)(C.a,{prefix:Object(p.jsx)(q.a,{className:"site-form-item-icon"}),placeholder:"T\xean \u0111\u0103ng nh\u1eadp",onPressEnter:l,autoFocus:!0})}),Object(p.jsx)(Y.a.Item,{name:"password",rules:[{required:!0,message:"H\xe3y nh\u1eadp m\u1eadt kh\u1ea9u c\u1ee7a b\u1ea1n!"}],children:Object(p.jsx)(C.a.Password,{prefix:Object(p.jsx)(B.a,{className:"site-form-item-icon"}),type:"password",placeholder:"M\u1eadt kh\u1ea9u",onPressEnter:l})}),r||Object(p.jsxs)(Y.a.Item,{children:[Object(p.jsx)(Y.a.Item,{name:"remember",valuePropName:"checked",noStyle:!0,children:Object(p.jsx)(k.a,{children:"Gi\u1eef t\xf4i lu\xf4n \u0111\u0103ng nh\u1eadp"})}),Object(p.jsx)("a",{className:"login-form-forgot",children:"Qu\xean m\u1eadt kh\u1ea9u"})]}),Object(p.jsx)(Y.a.Item,{children:Object(p.jsx)(v.a,{type:"primary",onClick:l,className:"login-form-button",children:r?"\u0110\u0103ng k\xed":"\u0110\u0103ng nh\u1eadp"})}),Object(p.jsxs)(Y.a.Item,{noStyle:!0,children:["Ho\u1eb7c"," ",Object(p.jsx)("a",{onClick:function(){i((function(e){return!e})),t.resetFields()},children:r?"\u0111\u0103ng nh\u1eadp":"\u0111\u0103ng k\xed ngay!"})]})]})]})})}),P=(n(948),n(645)),E=n.n(P),V=(n(950),n(646)),Q=n.n(V),G=(n(954),n(418)),K=n.n(G),X=n(1119),L=n(131),z=n(1109),U=n(1110),W=n(1111),J=n(1112),_=n(1113),Z=n(1114),$=n(1115),ee=n(1116),te={route:{path:"/",routes:[{path:"/analysis",name:"Th\u1ed1ng k\xea",icon:Object(p.jsx)(z.a,{}),component:"./Analysis"},{path:"/room",name:"Qu\u1ea3n l\xfd ph\xf2ng",icon:Object(p.jsx)(U.a,{}),component:"./Room"},{path:"/kind-of-room",name:"Qu\u1ea3n l\xfd lo\u1ea1i ph\xf2ng",icon:Object(p.jsx)(W.a,{}),component:"./KindOfRoom"},{path:"/customer",name:"Qu\u1ea3n l\xfd kh\xe1ch h\xe0ng",icon:Object(p.jsx)(J.a,{}),component:"./Customer"},{path:"/agreement",name:"Qu\u1ea3n l\xfd h\u1ee3p \u0111\u1ed3ng",icon:Object(p.jsx)(_.a,{}),component:"./Agreement"},{path:"/unit-price",name:"Qu\u1ea3n l\xfd \u0111\u01a1n gi\xe1",icon:Object(p.jsx)(Z.a,{}),component:"./UnitPrice"},{path:"/bill",name:"Qu\u1ea3n l\xfd h\xf3a \u0111\u01a1n",icon:Object(p.jsx)($.a,{}),component:"./Bill"},{path:"/equipment",name:"Qu\u1ea3n l\xfd trang thi\u1ebft b\u1ecb",icon:Object(p.jsx)(ee.a,{}),component:"./Equipment"}]},location:{pathname:"/"}},ne=n(412),ae=n(89),re=(n(530),n(359)),ce=n.n(re),ie=n(623),oe=function(){var e=window.roomManagementSystemDB,t=Object(c.useState)([]),n=Object(b.a)(t,2),a=n[0],r=n[1],i=a.filter((function(e){return!e.stillEmpty})).length,o=function(){var t=Object(I.a)(N.a.mark((function t(){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=r,t.next=3,e.room.toArray();case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(c.useEffect)((function(){o()}),[]);var s={appendPadding:10,data:[{type:"C\xf2n tr\u1ed1ng",value:i},{type:"C\xf3 kh\xe1ch \u1edf",value:a.length-i}],angleField:"value",colorField:"type",radius:.9,label:{type:"inner",offset:"-30%",content:function(e){var t=e.percent;return"".concat((100*t).toFixed(0),"%")},style:{fontSize:14,textAlign:"center"}},interactions:[{type:"element-active"}]};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(ie.a,Object(h.a)({},s)),Object(p.jsx)("div",{style:{marginTop:24,display:"flex",justifyContent:"center",width:"100%"},children:Object(p.jsx)(ce.a.Title,{level:4,children:"T\xecnh tr\u1ea1ng ph\xf2ng"})})]})},se=(n(249),n(145)),le=n.n(se),ue=n(44),de=n.n(ue),me=n(634),he=function(){var e=window.roomManagementSystemDB,t=Object(c.useState)([]),n=Object(b.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)([]),o=Object(b.a)(i,2),s=o[0],l=o[1],u=function(){var t=Object(I.a)(N.a.mark((function t(){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.agreement.toArray();case 2:return n=t.sent,t.next=5,Promise.all(n.map(function(){var t=Object(I.a)(N.a.mark((function t(n){var a,r,c,i;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.room.get(n.roomId)]);case 2:return a=t.sent,r=Object(b.a)(a,1),n.room=r[0],t.next=7,Promise.all([e.kindOfRoom.get(n.room.kindOfRoomId)]);case 7:c=t.sent,i=Object(b.a)(c,1),n.room.kindOfRoom=i[0];case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 5:r(n);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(c.useEffect)((function(){u()}),[]);var d=a.filter((function(e){return de()(s[0]).isSameOrBefore(e.date[0])||de()(s[1]).isSameOrAfter(e.date[0])})),m={data:s.length>0?Array.from({length:de()(s[1]).diff(de()(s[0]),"months")+1}).map((function(e,t){return{month:de()(s[0]).add(t,"month").format("MM/YYYY"),value:d.filter((function(e){return de()(s[0]).add(t,"month").isSameOrBefore(e.date[1])})).map((function(e){return e.room.kindOfRoom.price})).reduce((function(e,t){return e+t}),0)}})):[],xField:"month",yField:"value",label:{},point:{size:5,shape:"diamond",style:{fill:"white",stroke:"#5B8FF9",lineWidth:2}},tooltip:{showMarkers:!1},state:{active:{style:{shadowBlur:4,stroke:"#000",fill:"red"}}},interactions:[{type:"marker-active"}]};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(le.a.RangePicker,{picker:"month",style:{width:400,marginBottom:24},format:["MM/YYYY","MM/YYYY"],ranges:{"1 th\xe1ng":[de()().startOf("months"),de()().endOf("months")],"3 th\xe1ng":[de()().startOf("months"),de()().add(3,"months").endOf("months")],"6 th\xe1ng":[de()().startOf("months"),de()().add(6,"months").endOf("months")],"1 n\u0103m":[de()().startOf("months"),de()().add(12,"months").endOf("months")]},onChange:function(e){l([e[0].valueOf(),e[1].valueOf()])}}),Object(p.jsx)(me.a,Object(h.a)({},m)),Object(p.jsx)("div",{style:{marginTop:24,display:"flex",justifyContent:"center",width:"100%"},children:Object(p.jsx)(ce.a.Title,{level:4,children:"Doanh thu"})})]})},je=function(){return Object(p.jsx)(ne.a,{header:{title:"Th\u1ed1ng k\xea"},children:Object(p.jsxs)(ae.a,{ghost:!0,gutter:[24,0],children:[Object(p.jsx)(ae.a,{colSpan:8,children:Object(p.jsx)(oe,{})}),Object(p.jsx)(ae.a,{colSpan:16,children:Object(p.jsx)(he,{})})]})})},fe=(n(406),n(137)),be=n.n(fe),Oe=(n(139),n(71)),pe=n.n(Oe),ge=(n(167),n(79)),xe=n.n(ge),ye=n(1117),ve=n(1118),we=n(106),ke=function(e){var t=e.changeTourStep,n=e.changeTourOpen,a=Object(c.useState)(!1),r=Object(b.a)(a,2),i=r[0],o=r[1],s=Object(c.useState)([]),l=Object(b.a)(s,2),u=l[0],d=l[1],m=Object(c.useState)(""),j=Object(b.a)(m,2),f=j[0],O=j[1],g=Object(c.useState)({kindOfRoom:[]}),x=Object(b.a)(g,2),y=x[0],w=x[1],k=Y.a.useForm(),F=Object(b.a)(k,1)[0],T=window.roomManagementSystemDB,S=function(){var e=Object(I.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=d,e.next=3,T.room.toArray();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(I.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.kindOfRoom.toArray();case 2:t=e.sent,w({kindOfRoom:t});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){S(),R(),setTimeout((function(){t(7),setTimeout((function(){n(!1)}),1500)}),4e3)}),[]);var q=function(e){return e.value?"Kh\xf4ng":"C\xf3"};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(ne.a,{extra:[Object(p.jsx)(v.a,{type:"primary",onClick:function(){o(!0),setTimeout((function(){t(6)}),300)},children:"Th\xeam m\u1edbi"})],header:{title:"Qu\u1ea3n l\xfd ph\xf2ng"},children:Object(p.jsx)(ae.a,{style:{height:window.innerHeight-168},className:"ag-theme-alpine",children:Object(p.jsx)(we.AgGridReact,{animateRows:!0,defaultColDef:{floatingFilter:!0,sortable:!0,filter:!0},columnDefs:[{headerName:"M\xe3",field:"code",filter:"agTextColumnFilter"},{headerName:"T\xean",field:"name",filter:"agTextColumnFilter"},{headerName:"Lo\u1ea1i",field:"kindOfRoom",filter:"agTextColumnFilter"},{headerName:"C\xf2n tr\u1ed1ng",field:"stillEmpty",filterParams:{valueFormatter:q},valueFormatter:q},{pinned:"right",field:"",width:100,floatingFilter:!1,cellRendererFramework:function(e){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(pe.a,{title:"Ch\u1ec9nh s\u1eeda",children:Object(p.jsx)(v.a,{onClick:function(){return t=e.data,O(t.id),o(!0),void F.setFieldsValue(t);var t},icon:Object(p.jsx)(ye.a,{}),style:{marginRight:8},type:"primary"})}),Object(p.jsx)(pe.a,{title:"X\xf3a",children:Object(p.jsx)(v.a,{icon:Object(p.jsx)(ve.a,{}),danger:!0,onClick:function(){return t=e.data,void xe.a.warning({title:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a ph\xf2ng ".concat(t.name,"?"),onOk:function(){T.room.where("code").equals(t.code).delete().then((function(){M.a.success("X\xf3a th\xe0nh c\xf4ng!"),S()}))}});var t}})})]})}}],rowData:u.map((function(e){var t;return Object(h.a)({kindOfRoom:null===(t=y.kindOfRoom.find((function(t){return t.id===e.kindOfRoomId})))||void 0===t?void 0:t.name},e)}))})})}),Object(p.jsx)(xe.a,{visible:i,title:f?"Ch\u1ec9nh s\u1eeda":"Th\xeam ph\xf2ng m\u1edbi",centered:!0,cancelText:"H\u1ee7y",onOk:function(){F.validateFields().then(function(){var e=Object(I.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.room.where("code").equals(t.code).toArray();case 2:if(!(e.sent.filter((function(e){var t=e.id;return f?f!==t:t})).length>0)){e.next=6;break}return M.a.error("Ph\xf2ng ".concat(t.name," \u0111\xe3 t\u1ed3n t\u1ea1i!")),e.abrupt("return");case 6:if(!f){e.next=9;break}return T.room.update(f,t).then((function(e){e?(M.a.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng!"),o(!1),O(""),F.resetFields(),S()):M.a.error("C\u1eadp nh\u1eadt th\u1ea5t b\u1ea1i!")})),e.abrupt("return");case 9:T.room.add(Object(h.a)({id:Object(D.a)()},t)).then((function(){M.a.success("T\u1ea1o th\xe0nh c\xf4ng!"),o(!1),F.resetFields(),S()}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),setTimeout((function(){n(!0),t(8)}),300)},onCancel:function(){o(!1),O(""),F.resetFields()},children:Object(p.jsxs)(Y.a,{name:"add-form",form:F,labelCol:{span:6},wrapperCol:{span:18},children:[Object(p.jsx)(Y.a.Item,{label:"M\xe3",name:"code",rules:[{required:!0,message:"H\xe3y nh\u1eadp m\xe3!"}],children:Object(p.jsx)(C.a,{autoFocus:!0})}),Object(p.jsx)(Y.a.Item,{label:"T\xean",name:"name",rules:[{required:!0,message:"H\xe3y nh\u1eadp t\xean!"}],children:Object(p.jsx)(C.a,{})}),Object(p.jsx)(Y.a.Item,{label:"Lo\u1ea1i ph\xf2ng",name:"kindOfRoomId",rules:[{required:!0,message:"H\xe3y ch\u1ecdn lo\u1ea1i ph\xf2ng!"}],style:{marginBottom:0},children:Object(p.jsx)(be.a,{optionLabelProp:"label",children:y.kindOfRoom.map((function(e){return Object(p.jsxs)(be.a.Option,{value:e.id,label:e.name,children:[e.name," (",e.price,")"]},e.id)}))})})]})})]})},Fe=Object(c.forwardRef)((function(e,t){var n=e.getKindOfRoomModalRef,a=e.edit,r=window.roomManagementSystemDB,i=Object(c.useState)([]),o=Object(b.a)(i,2),s=o[0],l=o[1],u=new Intl.NumberFormat("en-US",{style:"currency",currency:"VND"}),d=function(){var e=Object(I.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=l,e.next=3,r.kindOfRoom.toArray();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useImperativeHandle)(t,(function(){return{fetchData:d}})),Object(c.useEffect)((function(){d()}),[]);var m=function(){var e=Object(I.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.room.where({kindOfRoomId:t.id}).toArray();case 2:if(!(e.sent.length>0)){e.next=6;break}return M.a.error("B\u1ea1n kh\xf4ng th\u1ec3  lo\u1ea1i ph\xf2ng v\xec c\xf3 ph\xf2ng \u0111\xe3 s\u1eed d\u1ee5ng"),e.abrupt("return");case 6:xe.a.warning({title:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a lo\u1ea1i ph\xf2ng ".concat(t.name,"?"),onOk:function(){r.kindOfRoom.where("code").equals(t.code).delete().then((function(){M.a.success("X\xf3a th\xe0nh c\xf4ng!"),d()}))}});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)(ae.a,{style:{height:window.innerHeight-168},className:"ag-theme-alpine",children:Object(p.jsx)(we.AgGridReact,{animateRows:!0,defaultColDef:{floatingFilter:!0,sortable:!0,filter:!0},columnDefs:[{headerName:"M\xe3",field:"code",filter:"agTextColumnFilter"},{headerName:"T\xean",field:"name",filter:"agTextColumnFilter"},{headerName:"Gi\xe1",field:"price",valueFormatter:function(e){return u.format(e.value)},filter:"agTextColumnFilter"},{headerName:"Ti\u1ec1n c\u1ecdc",field:"deposit",valueFormatter:function(e){return u.format(e.value)},filter:"agTextColumnFilter"},{pinned:"right",field:"",width:100,floatingFilter:!1,cellRendererFramework:function(e){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(pe.a,{title:"Ch\u1ec9nh s\u1eeda",children:Object(p.jsx)(v.a,{onClick:function(){return function(e){var t=n(),r=t.getForm,c=t.openModal;a(e.id),c(),r().setFieldsValue(e)}(e.data)},icon:Object(p.jsx)(ye.a,{}),style:{marginRight:8},type:"primary"})}),Object(p.jsx)(pe.a,{title:"X\xf3a",children:Object(p.jsx)(v.a,{icon:Object(p.jsx)(ve.a,{}),danger:!0,onClick:function(){return m(e.data)}})})]})}}],rowData:s})})})),Ce=(n(250),n(91)),Te=n.n(Ce),Ne=Object(c.forwardRef)((function(e,t){var n=e.edit,a=e.onOk,r=e.onCancel,i=Object(c.useState)(!1),o=Object(b.a)(i,2),s=o[0],l=o[1],u=Y.a.useForm(),d=Object(b.a)(u,1)[0],m=window.roomManagementSystemDB;Object(c.useImperativeHandle)(t,(function(){return{getForm:function(){return d},openModal:function(){return l(!0)}}}));return Object(p.jsx)(xe.a,{visible:s,title:n?"Ch\u1ec9nh s\u1eeda":"Th\xeam lo\u1ea1i ph\xf2ng m\u1edbi",centered:!0,cancelText:"H\u1ee7y",onOk:function(){d.validateFields().then(function(){var e=Object(I.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.kindOfRoom.where("code").equals(t.code).toArray();case 2:if(!(e.sent.filter((function(e){var t=e.id;return n?n!==t:t})).length>0)){e.next=6;break}return M.a.error("Lo\u1ea1i ph\xf2ng ".concat(t.name," \u0111\xe3 t\u1ed3n t\u1ea1i!")),e.abrupt("return");case 6:if(!n){e.next=9;break}return m.kindOfRoom.update(n,t).then((function(e){e?(M.a.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng!"),l(!1),d.resetFields(),a()):M.a.error("C\u1eadp nh\u1eadt th\u1ea5t b\u1ea1i!")})),e.abrupt("return");case 9:m.kindOfRoom.add(Object(h.a)({id:Object(D.a)()},t)).then((function(){M.a.success("T\u1ea1o th\xe0nh c\xf4ng!"),l(!1),d.resetFields(),a()}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},onCancel:function(){l(!1),d.resetFields(),r()},children:Object(p.jsxs)(Y.a,{name:"add-form",form:d,labelCol:{span:6},wrapperCol:{span:18},children:[Object(p.jsx)(Y.a.Item,{label:"M\xe3",name:"code",rules:[{required:!0,message:"H\xe3y nh\u1eadp m\xe3!"}],children:Object(p.jsx)(C.a,{autoFocus:!0})}),Object(p.jsx)(Y.a.Item,{label:"T\xean",name:"name",rules:[{required:!0,message:"H\xe3y nh\u1eadp t\xean!"}],children:Object(p.jsx)(C.a,{})}),Object(p.jsx)(Y.a.Item,{label:"Gi\xe1",name:"price",rules:[{required:!0,message:"H\xe3y nh\u1eadp gi\xe1!"}],children:Object(p.jsx)(Te.a,{style:{width:"100%"},formatter:function(e){return"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\s?VN\u0110|(,*)/g,"")}})}),Object(p.jsx)(Y.a.Item,{label:"Ti\u1ec1n c\u1ecdc",name:"deposit",rules:[{required:!0,message:"H\xe3y nh\u1eadp ti\u1ec1n c\u1ecdc!"}],style:{marginBottom:0},children:Object(p.jsx)(Te.a,{style:{width:"100%"},formatter:function(e){return"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\s?VN\u0110|(,*)/g,"")}})})]})})})),Se=function(e){var t=e.changeTourStep,n=e.changeTourOpen,a=Object(c.useState)(""),r=Object(b.a)(a,2),i=r[0],o=r[1],s=Object(c.useRef)(null),l=Object(c.useRef)(null);return Object(c.useEffect)((function(){setTimeout((function(){t(3),setTimeout((function(){n(!1)}),1500)}),4e3)}),[]),Object(p.jsxs)(ne.a,{extra:[Object(p.jsx)(v.a,{type:"primary",onClick:function(){l.current.openModal(),setTimeout((function(){t(2)}),300)},children:"Th\xeam m\u1edbi"})],header:{title:"Qu\u1ea3n l\xfd lo\u1ea1i ph\xf2ng"},children:[Object(p.jsx)(Fe,{edit:function(e){return o(e)},ref:s,getKindOfRoomModalRef:function(){return l.current}}),Object(p.jsx)(Ne,{ref:l,edit:i,onCancel:function(){return o("")},onOk:function(){i&&o(""),s.current.fetchData(),setTimeout((function(){n(!0),t(4)}),300)}})]})},Me=(n(1053),n(272)),Ie=n.n(Me),Re=n(112),Ye=["dateOfBirth"],De=["dateOfBirth"],qe=function(){var e=Object(c.useState)(!1),t=Object(b.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)([]),i=Object(b.a)(r,2),o=i[0],s=i[1],l=Object(c.useState)(""),u=Object(b.a)(l,2),d=u[0],m=u[1],j=Y.a.useForm(),f=Object(b.a)(j,1)[0],O=window.roomManagementSystemDB,g=function(){var e=Object(I.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,O.customer.toArray();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){g()}),[]);var x=function(e){return e.value&&de()(+e.value).format("DD/MM/YYYY")};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(ne.a,{extra:[Object(p.jsx)(v.a,{type:"primary",onClick:function(){return a(!0)},children:"Th\xeam m\u1edbi"})],header:{title:"Qu\u1ea3n l\xfd kh\xe1ch h\xe0ng"},children:Object(p.jsx)(ae.a,{style:{height:window.innerHeight-168},className:"ag-theme-alpine",children:Object(p.jsx)(we.AgGridReact,{animateRows:!0,defaultColDef:{floatingFilter:!0,sortable:!0,filter:!0},columnDefs:[{headerName:"M\xe3",field:"code",filter:"agTextColumnFilter"},{headerName:"H\u1ecd v\xe0 t\xean",field:"fullName",filter:"agTextColumnFilter"},{headerName:"S\u1ed1 CMND",field:"identityCardNumber",filter:"agTextColumnFilter"},{headerName:"Ng\xe0y sinh",field:"dateOfBirth",filterParams:{valueFormatter:x},valueFormatter:x},{headerName:"Gi\u1edbi t\xednh",field:"sex",filter:"agTextColumnFilter"},{headerName:"\u0110\u1ecba ch\u1ec9",field:"address",filter:"agTextColumnFilter"},{headerName:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",field:"phoneNumber",filter:"agTextColumnFilter"},{headerName:"Ngh\u1ec1 nghi\u1ec7p",field:"job",filter:"agTextColumnFilter"},{pinned:"right",field:"",width:100,floatingFilter:!1,cellRendererFramework:function(e){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(pe.a,{title:"Ch\u1ec9nh s\u1eeda",children:Object(p.jsx)(v.a,{onClick:function(){return function(e){var t=e.dateOfBirth,n=Object(Re.a)(e,Ye);m(n.id),a(!0),f.setFieldsValue(Object(h.a)({dateOfBirth:t&&de()(t)},n))}(e.data)},icon:Object(p.jsx)(ye.a,{}),style:{marginRight:8},type:"primary"})}),Object(p.jsx)(pe.a,{title:"X\xf3a",children:Object(p.jsx)(v.a,{icon:Object(p.jsx)(ve.a,{}),danger:!0,onClick:function(){return t=e.data,void xe.a.warning({title:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a kh\xe1ch h\xe0ng ".concat(t.fullName,"?"),onOk:function(){O.customer.where("code").equals(t.code).delete().then((function(){M.a.success("X\xf3a th\xe0nh c\xf4ng!"),g()}))}});var t}})})]})}}],rowData:o})})}),Object(p.jsx)(xe.a,{visible:n,title:d?"Ch\u1ec9nh s\u1eeda":"Th\xeam kh\xe1ch h\xe0ng m\u1edbi",centered:!0,cancelText:"H\u1ee7y",onOk:function(){f.validateFields().then(function(){var e=Object(I.a)(N.a.mark((function e(t){var n,r,c,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dateOfBirth,r=Object(Re.a)(t,De),e.next=3,O.customer.where("code").equals(r.code).toArray();case 3:if(c=e.sent,i=Object(h.a)({dateOfBirth:null===n||void 0===n?void 0:n.valueOf()},r),!(c.filter((function(e){var t=e.id;return d?d!==t:t})).length>0)){e.next=8;break}return M.a.error("Kh\xe1ch h\xe0ng ".concat(r.fullName," \u0111\xe3 t\u1ed3n t\u1ea1i!")),e.abrupt("return");case 8:if(!d){e.next=11;break}return O.customer.update(d,i).then((function(e){e?(M.a.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng!"),a(!1),m(""),f.resetFields(),g()):M.a.error("C\u1eadp nh\u1eadt th\u1ea5t b\u1ea1i!")})),e.abrupt("return");case 11:O.customer.add(Object(h.a)({id:Object(D.a)()},i)).then((function(){M.a.success("T\u1ea1o th\xe0nh c\xf4ng!"),a(!1),f.resetFields(),g()}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},onCancel:function(){a(!1),m(""),f.resetFields()},children:Object(p.jsxs)(Y.a,{name:"add-form",form:f,labelCol:{span:6},wrapperCol:{span:18},initialValues:{sex:"Nam"},children:[Object(p.jsx)(Y.a.Item,{label:"M\xe3",name:"code",rules:[{required:!0,message:"H\xe3y nh\u1eadp m\xe3!"}],children:Object(p.jsx)(C.a,{autoFocus:!0})}),Object(p.jsx)(Y.a.Item,{label:"H\u1ecd v\xe0 t\xean",name:"fullName",rules:[{required:!0,message:"H\xe3y nh\u1eadp h\u1ecd v\xe0 t\xean!"}],children:Object(p.jsx)(C.a,{})}),Object(p.jsx)(Y.a.Item,{label:"S\u1ed1 CMND",name:"identityCardNumber",rules:[{required:!0,message:"H\xe3y nh\u1eadp s\u1ed1 CMND!"}],children:Object(p.jsx)(Te.a,{style:{width:"100%"}})}),Object(p.jsx)(Y.a.Item,{label:"Ng\xe0y sinh",name:"dateOfBirth",children:Object(p.jsx)(le.a,{style:{width:"100%"},format:"DD/MM/YYYY"})}),Object(p.jsx)(Y.a.Item,{label:"Gi\u1edbi t\xednh",name:"sex",children:Object(p.jsxs)(Ie.a.Group,{children:[Object(p.jsx)(Ie.a,{value:"Nam",children:"Nam"}),Object(p.jsx)(Ie.a,{value:"N\u1eef",children:"N\u1eef"}),Object(p.jsx)(Ie.a,{value:"Kh\xe1c",children:"Kh\xe1c"})]})}),Object(p.jsx)(Y.a.Item,{label:"\u0110\u1ecba ch\u1ec9",name:"address",children:Object(p.jsx)(C.a,{})}),Object(p.jsx)(Y.a.Item,{label:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",name:"phoneNumber",children:Object(p.jsx)(Te.a,{style:{width:"100%"}})}),Object(p.jsx)(Y.a.Item,{label:"Ngh\u1ec1 nghi\u1ec7p",name:"job",style:{marginBottom:0},children:Object(p.jsx)(C.a,{})})]})})]})},Be=["date"],He=["date"],Ae=["date"],Pe=function(){var e=Object(c.useState)(!1),t=Object(b.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)([]),i=Object(b.a)(r,2),o=i[0],s=i[1],l=Object(c.useState)(""),u=Object(b.a)(l,2),d=u[0],m=u[1],j=Y.a.useForm(),f=Object(b.a)(j,1)[0],O=Object(c.useState)({room:[],customer:[]}),g=Object(b.a)(O,2),x=g[0],y=g[1],w=window.roomManagementSystemDB,k=function(){var e=Object(I.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,w.agreement.toArray();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(I.a)(N.a.mark((function e(){var t,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.room.toArray();case 2:return t=e.sent,e.next=5,w.customer.toArray();case 5:n=e.sent,y({room:t,customer:n});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){k(),F()}),[]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(ne.a,{extra:[Object(p.jsx)(v.a,{type:"primary",onClick:function(){return a(!0)},children:"Th\xeam m\u1edbi"})],header:{title:"Qu\u1ea3n l\xfd h\u1ee3p \u0111\u1ed3ng"},children:Object(p.jsx)(ae.a,{style:{height:window.innerHeight-168},className:"ag-theme-alpine",children:Object(p.jsx)(we.AgGridReact,{animateRows:!0,defaultColDef:{floatingFilter:!0,sortable:!0,filter:!0,resizable:!0},columnDefs:[{headerName:"M\xe3",field:"code",filter:"agTextColumnFilter"},{headerName:"Ph\xf2ng",field:"room",filter:"agTextColumnFilter"},{headerName:"Kh\xe1ch h\xe0ng",field:"customer",filter:"agTextColumnFilter"},{headerName:"Th\u1eddi h\u1ea1n",field:"formatDate",filter:"agTextColumnFilter"},{pinned:"right",field:"",width:100,floatingFilter:!1,cellRendererFramework:function(e){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(pe.a,{title:"Ch\u1ec9nh s\u1eeda",children:Object(p.jsx)(v.a,{onClick:function(){return function(e){var t=e.date,n=Object(Re.a)(e,Be),r=JSON.parse(t);m(n.id),a(!0),f.setFieldsValue(Object(h.a)({date:[de()(r[0]),de()(r[1])]},n))}(e.data)},icon:Object(p.jsx)(ye.a,{}),style:{marginRight:8},type:"primary"})}),Object(p.jsx)(pe.a,{title:"X\xf3a",children:Object(p.jsx)(v.a,{icon:Object(p.jsx)(ve.a,{}),danger:!0,onClick:function(){return t=e.data,void xe.a.warning({title:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a h\u1ee3p \u0111\u1ed3ng ".concat(t.code,"?"),onOk:function(){w.agreement.where("code").equals(t.code).delete().then(Object(I.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M.a.success("X\xf3a th\xe0nh c\xf4ng!"),e.next=3,w.room.update(t.roomId,{stillEmpty:!1});case 3:k();case 4:case"end":return e.stop()}}),e)}))))}});var t}})})]})}}],rowData:o.map((function(e){var t,n=e.date,a=Object(Re.a)(e,Ae);return Object(h.a)({room:null===(t=x.room.find((function(e){return e.id===a.roomId})))||void 0===t?void 0:t.name,date:JSON.stringify(n),formatDate:"t\u1eeb ".concat(de()(n[0]).format("MM/YYYY")," \u0111\u1ebfn ").concat(de()(n[1]).format("MM/YYYY")),customer:x.customer.filter((function(e){return a.customerIds.includes(e.id)})).map((function(e){return e.fullName})).join(", ")},a)}))})})}),Object(p.jsx)(xe.a,{visible:n,title:d?"Ch\u1ec9nh s\u1eeda":"Th\xeam h\u1ee3p \u0111\u1ed3ng m\u1edbi",centered:!0,cancelText:"H\u1ee7y",onOk:function(){f.validateFields().then(function(){var e=Object(I.a)(N.a.mark((function e(t){var n,r,c,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.date,r=Object(Re.a)(t,He),c=Object(h.a)({date:[n[0].valueOf(),n[1].valueOf()]},r),e.next=4,w.agreement.where("code").equals(c.code).toArray();case 4:if(!(e.sent.filter((function(e){var t=e.id;return d?d!==t:t})).length>0)){e.next=8;break}return M.a.error("H\u1ee3p \u0111\u1ed3ng ".concat(c.code," \u0111\xe3 t\u1ed3n t\u1ea1i!")),e.abrupt("return");case 8:if(i=o.filter((function(e){return d?d!==e.id:e.id})).filter((function(e){return e.customerIds.filter((function(e){return c.customerIds.includes(e)})).length>0})),!(o.filter((function(e){return d?d!==e.id:e.id})).filter((function(e){return e.roomId===c.roomId})).length>0)){e.next=13;break}return M.a.error("Ph\xf2ng \u0111\xe3 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng!"),e.abrupt("return");case 13:if(!(i.length>0)){e.next=16;break}return M.a.error("C\xf3 kh\xe1ch h\xe0ng \u0111ang \u1edf ph\xf2ng kh\xe1c!"),e.abrupt("return");case 16:if(!d){e.next=19;break}return w.agreement.update(d,c).then((function(e){e?(M.a.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng!"),a(!1),m(""),f.resetFields(),k()):M.a.error("C\u1eadp nh\u1eadt th\u1ea5t b\u1ea1i!")})),e.abrupt("return");case 19:w.agreement.add(Object(h.a)({id:Object(D.a)()},c)).then(Object(I.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M.a.success("T\u1ea1o th\xe0nh c\xf4ng!"),a(!1),f.resetFields(),e.next=5,w.room.update(c.roomId,{stillEmpty:!0});case 5:k();case 6:case"end":return e.stop()}}),e)}))));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},onCancel:function(){a(!1),m(""),f.resetFields()},children:Object(p.jsxs)(Y.a,{name:"add-form",form:f,labelCol:{span:6},wrapperCol:{span:18},children:[Object(p.jsx)(Y.a.Item,{label:"M\xe3",name:"code",rules:[{required:!0,message:"H\xe3y nh\u1eadp m\xe3!"}],children:Object(p.jsx)(C.a,{autoFocus:!0})}),Object(p.jsx)(Y.a.Item,{label:"Ph\xf2ng",name:"roomId",rules:[{required:!0,message:"H\xe3y ch\u1ecdn ph\xf2ng!"}],children:Object(p.jsx)(be.a,{children:x.room.map((function(e){return Object(p.jsx)(be.a.Option,{value:e.id,children:e.name},e.id)}))})}),Object(p.jsx)(Y.a.Item,{label:"Kh\xe1ch h\xe0ng",name:"customerIds",rules:[{required:!0,message:"H\xe3y ch\u1ecdn kh\xe1ch h\xe0ng!"}],children:Object(p.jsx)(be.a,{mode:"multiple",children:x.customer.map((function(e){return Object(p.jsx)(be.a.Option,{value:e.id,children:e.fullName},e.id)}))})}),Object(p.jsx)(Y.a.Item,{label:"Th\u1eddi h\u1ea1n",name:"date",style:{marginBottom:0},rules:[{required:!0,message:"H\xe3y ch\u1ecdn th\u1eddi h\u1ea1n!"}],children:Object(p.jsx)(le.a.RangePicker,{style:{width:"100%"},picker:"month",format:["MM/YYYY","MM/YYYY"],ranges:{"1 th\xe1ng":[de()(),de()().add(1,"months")],"3 th\xe1ng":[de()(),de()().add(3,"months")],"6 th\xe1ng":[de()(),de()().add(6,"months")],"1 n\u0103m":[de()(),de()().add(12,"months")]}})})]})})]})},Ee=["date"],Ve=["date"],Qe=function(){var e=Object(c.useState)(!1),t=Object(b.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)([]),i=Object(b.a)(r,2),o=i[0],s=i[1],l=Object(c.useState)(""),u=Object(b.a)(l,2),d=u[0],m=u[1],j=Y.a.useForm(),f=Object(b.a)(j,1)[0],O=window.roomManagementSystemDB,g=new Intl.NumberFormat("en-US",{style:"currency",currency:"VND"}),x=function(){var e=Object(I.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,O.unitPrice.toArray();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){x()}),[]);var y=function(e){return e.value&&de()(+e.value).format("MM/YYYY")};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(ne.a,{extra:[Object(p.jsx)(v.a,{type:"primary",onClick:function(){return a(!0)},children:"Th\xeam m\u1edbi"})],header:{title:"Qu\u1ea3n l\xfd \u0111\u01a1n gi\xe1"},children:Object(p.jsx)(ae.a,{style:{height:window.innerHeight-168},className:"ag-theme-alpine",children:Object(p.jsx)(we.AgGridReact,{animateRows:!0,defaultColDef:{floatingFilter:!0,sortable:!0,filter:!0},columnDefs:[{headerName:"\u0110\u01a1n gi\xe1 \u0111i\u1ec7n",field:"electricity",filter:"agTextColumnFilter",valueFormatter:function(e){return g.format(e.value)}},{headerName:"\u0110\u01a1n gi\xe1 n\u01b0\u1edbc",field:"water",filter:"agTextColumnFilter",valueFormatter:function(e){return g.format(e.value)}},{headerName:"Ti\u1ec1n gi\u1eef xe",field:"parking",filter:"agTextColumnFilter",valueFormatter:function(e){return g.format(e.value)}},{headerName:"Ti\u1ec1n r\xe1c",field:"junkMoney",filter:"agTextColumnFilter",valueFormatter:function(e){return g.format(e.value)}},{headerName:"Th\u1eddi gian",field:"date",filterParams:{valueFormatter:y},valueFormatter:y},{pinned:"right",field:"",width:100,floatingFilter:!1,cellRendererFramework:function(e){return de()().isAfter(de()(e.data.date),"months")?null:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(pe.a,{title:"Ch\u1ec9nh s\u1eeda",children:Object(p.jsx)(v.a,{onClick:function(){return function(e){var t=e.date,n=Object(Re.a)(e,Ee);m(n.id),a(!0),f.setFieldsValue(Object(h.a)({date:de()(t)},n))}(e.data)},icon:Object(p.jsx)(ye.a,{}),style:{marginRight:8},type:"primary"})}),Object(p.jsx)(pe.a,{title:"X\xf3a",children:Object(p.jsx)(v.a,{icon:Object(p.jsx)(ve.a,{}),danger:!0,onClick:function(){return t=e.data,void xe.a.warning({title:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a \u0111\u01a1n gi\xe1 th\xe1ng ".concat(t.code,"?"),onOk:function(){O.unitPrice.where("code").equals(t.code).delete().then((function(){M.a.success("X\xf3a th\xe0nh c\xf4ng!"),x()}))}});var t}})})]})}}],rowData:o})})}),Object(p.jsx)(xe.a,{visible:n,title:d?"Ch\u1ec9nh s\u1eeda":"Th\xeam lo\u1ea1i ph\xf2ng m\u1edbi",centered:!0,cancelText:"H\u1ee7y",onOk:function(){f.validateFields().then(function(){var e=Object(I.a)(N.a.mark((function e(t){var n,r,c,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.date,r=Object(Re.a)(t,Ve),c=Object(h.a)({date:null===n||void 0===n?void 0:n.valueOf(),code:de()(n).format("MM/YYYY")},r),e.next=4,O.unitPrice.where("code").equals(c.code).toArray();case 4:if(!((i=e.sent).filter((function(e){var t=e.id;return d?d!==t:t})).length>0)){e.next=8;break}return M.a.error("\u0110\u01a1n gi\xe1 th\xe1ng ".concat(i[0].code," \u0111\xe3 t\u1ed3n t\u1ea1i!")),e.abrupt("return");case 8:if(!d){e.next=11;break}return O.unitPrice.update(d,c).then((function(e){e?(M.a.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng!"),a(!1),m(""),f.resetFields(),x()):M.a.error("C\u1eadp nh\u1eadt th\u1ea5t b\u1ea1i!")})),e.abrupt("return");case 11:O.unitPrice.add(Object(h.a)({id:Object(D.a)()},c)).then((function(){M.a.success("T\u1ea1o th\xe0nh c\xf4ng!"),a(!1),f.resetFields(),x()}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},onCancel:function(){a(!1),m(""),f.resetFields()},children:Object(p.jsxs)(Y.a,{name:"add-form",form:f,labelCol:{span:6},wrapperCol:{span:18},children:[Object(p.jsx)(Y.a.Item,{label:"\u0110i\u1ec7n",name:"electricity",rules:[{required:!0,message:"H\xe3y nh\u1eadp \u0111\u01a1n gi\xe1 \u0111i\u1ec7n!"}],children:Object(p.jsx)(Te.a,{style:{width:"100%"},formatter:function(e){return"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\s?VN\u0110|(,*)/g,"")}})}),Object(p.jsx)(Y.a.Item,{label:"N\u01b0\u1edbc",name:"water",rules:[{required:!0,message:"H\xe3y nh\u1eadp \u0111\u01a1n gi\xe1 n\u01b0\u1edbc!"}],children:Object(p.jsx)(Te.a,{style:{width:"100%"},formatter:function(e){return"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\s?VN\u0110|(,*)/g,"")}})}),Object(p.jsx)(Y.a.Item,{label:"Ti\u1ec1n gi\u1eef xe",name:"parking",rules:[{required:!0,message:"H\xe3y nh\u1eadp ti\u1ec1n xe!"}],children:Object(p.jsx)(Te.a,{style:{width:"100%"},formatter:function(e){return"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\s?VN\u0110|(,*)/g,"")}})}),Object(p.jsx)(Y.a.Item,{label:"Ti\u1ec1n r\xe1c",name:"junkMoney",rules:[{required:!0,message:"H\xe3y nh\u1eadp ti\u1ec1n r\xe1c!"}],children:Object(p.jsx)(Te.a,{style:{width:"100%"},formatter:function(e){return"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\s?VN\u0110|(,*)/g,"")}})}),Object(p.jsx)(Y.a.Item,{label:"Th\u1eddi gian",name:"date",style:{marginBottom:0},rules:[{required:!0,message:"H\xe3y ch\u1ecdn th\u1eddi gian!"}],children:Object(p.jsx)(le.a,{style:{width:"100%"},picker:"month",format:"MM/YYYY"})})]})})]})},Ge=["date"],Ke=["date"],Xe=function(){var e=Object(c.useState)(!1),t=Object(b.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)([]),i=Object(b.a)(r,2),o=i[0],s=i[1],l=Object(c.useState)(""),u=Object(b.a)(l,2),d=u[0],m=u[1],j=Y.a.useForm(),f=Object(b.a)(j,1)[0],O=Object(c.useState)({room:[],unitPrice:[]}),g=Object(b.a)(O,2),x=g[0],y=g[1],w=window.roomManagementSystemDB,k=new Intl.NumberFormat("en-US",{style:"currency",currency:"VND"}),F=function(){var e=Object(I.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,w.bill.toArray();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(I.a)(N.a.mark((function e(){var t,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.room.toArray();case 2:return t=e.sent,e.next=5,w.unitPrice.toArray();case 5:n=e.sent,y({room:t,unitPrice:n});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){F(),T()}),[]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(ne.a,{extra:[Object(p.jsx)(v.a,{type:"primary",onClick:function(){return a(!0)},children:"Th\xeam m\u1edbi"})],header:{title:"Qu\u1ea3n l\xfd h\xf3a \u0111\u01a1n"},children:Object(p.jsx)(ae.a,{style:{height:window.innerHeight-168},className:"ag-theme-alpine",children:Object(p.jsx)(we.AgGridReact,{animateRows:!0,defaultColDef:{floatingFilter:!0,sortable:!0,filter:!0,resizable:!0},groupMultiAutoColumn:!0,enableRangeSelection:!0,columnDefs:[{headerName:"Th\u1eddi gian",field:"formatDate",rowGroup:!0,hide:!0},{headerName:"M\xe3",field:"code",filter:"agTextColumnFilter"},{headerName:"Ph\xf2ng",field:"room",filter:"agTextColumnFilter"},{headerName:"S\u1ed1 l\u01b0\u1ee3ng \u0111i\u1ec7n ti\xeau th\u1ee5",field:"amountOfElectricity",filter:"agTextColumnFilter"},{headerName:"S\u1ed1 l\u01b0\u1ee3ng n\u01b0\u1edbc ti\xeau th\u1ee5",field:"amountOfWater",filter:"agTextColumnFilter"},{headerName:"S\u1ed1 l\u01b0\u1ee3ng xe",field:"numberOfVehicles",filter:"agTextColumnFilter"},{headerName:"Ti\u1ec1n \u0111i\u1ec7n",field:"electricityBill",filter:"agTextColumnFilter"},{headerName:"Ti\u1ec1n n\u01b0\u1edbc",field:"waterBill",filter:"agTextColumnFilter"},{headerName:"Ti\u1ec1n gi\u1eef xe",field:"parkingFee",filter:"agTextColumnFilter"},{headerName:"Ti\u1ec1n r\xe1c",field:"junkMoney",filter:"agTextColumnFilter"},{headerName:"T\u1ed5ng",field:"total",filter:"agTextColumnFilter"},{pinned:"right",field:"",width:100,floatingFilter:!1,cellRendererFramework:function(e){return!e.data||e.data&&de()().isAfter(de()(e.data.date))?null:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(pe.a,{title:"Ch\u1ec9nh s\u1eeda",children:Object(p.jsx)(v.a,{onClick:function(){return function(e){var t=e.date,n=Object(Re.a)(e,Ge);m(n.id),a(!0),f.setFieldsValue(Object(h.a)({date:de()(t)},n))}(e.data)},icon:Object(p.jsx)(ye.a,{}),style:{marginRight:8},type:"primary"})}),Object(p.jsx)(pe.a,{title:"X\xf3a",children:Object(p.jsx)(v.a,{icon:Object(p.jsx)(ve.a,{}),danger:!0,onClick:function(){return t=e.data,void xe.a.warning({title:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a h\xf3a \u0111\u01a1n ".concat(t.code,"?"),onOk:function(){w.bill.where("code").equals(t.code).delete().then((function(){M.a.success("X\xf3a th\xe0nh c\xf4ng!"),F()}))}});var t}})})]})}}],rowData:o.map((function(e){var t,n=x.unitPrice.find((function(t){return t.code===e.formatDate})),a=n?n.electricity*e.amountOfElectricity:0,r=n?n.water*e.amountOfWater:0,c=n?n.parking*e.numberOfVehicles:0,i=(null===n||void 0===n?void 0:n.junkMoney)||0,o=null===(t=x.room.find((function(t){return t.id===e.roomId})))||void 0===t?void 0:t.name,s=a+r+c+i;return Object(h.a)({room:o,electricityBill:k.format(a),waterBill:k.format(r),parkingFee:k.format(c),junkMoney:k.format(i),total:k.format(s)},e)}))})})}),Object(p.jsx)(xe.a,{visible:n,title:d?"Ch\u1ec9nh s\u1eeda":"Th\xeam h\xf3a \u0111\u01a1n m\u1edbi",centered:!0,cancelText:"H\u1ee7y",onOk:function(){f.validateFields().then(function(){var e=Object(I.a)(N.a.mark((function e(t){var n,r,c,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.date,r=Object(Re.a)(t,Ke),c=Object(h.a)({date:n.valueOf()},r),e.next=4,w.bill.where("code").equals(c.code).toArray();case 4:if(!(e.sent.filter((function(e){var t=e.id;return d?d!==t:t})).length>0)){e.next=8;break}return M.a.error("H\xf3a \u0111\u01a1n ".concat(c.code," \u0111\xe3 t\u1ed3n t\u1ea1i!")),e.abrupt("return");case 8:return i=de()(c.date).format("MM/YYYY"),e.next=11,w.bill.where({roomId:c.roomId,formatDate:i}).toArray();case 11:if(!e.sent.length){e.next=15;break}return M.a.error("C\xf3 ph\xf2ng \u0111\xe3 \u0111\u01b0\u1ee3c l\u1eadp h\xf3a \u0111\u01a1n!"),e.abrupt("return");case 15:if(!d){e.next=18;break}return w.bill.update(d,Object(h.a)({},c)).then((function(e){e?(M.a.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng!"),a(!1),m(""),f.resetFields(),F()):M.a.error("C\u1eadp nh\u1eadt th\u1ea5t b\u1ea1i!")})),e.abrupt("return");case 18:w.bill.add(Object(h.a)({id:Object(D.a)(),formatDate:de()(c.date).format("MM/YYYY")},c)).then((function(){M.a.success("T\u1ea1o th\xe0nh c\xf4ng!"),a(!1),f.resetFields(),F()}));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},onCancel:function(){a(!1),m(""),f.resetFields()},children:Object(p.jsxs)(Y.a,{name:"add-form",form:f,labelCol:{span:8},wrapperCol:{span:16},children:[Object(p.jsx)(Y.a.Item,{label:"M\xe3",name:"code",rules:[{required:!0,message:"H\xe3y nh\u1eadp m\xe3!"}],children:Object(p.jsx)(C.a,{autoFocus:!0})}),Object(p.jsx)(Y.a.Item,{label:"Ph\xf2ng",name:"roomId",rules:[{required:!0,message:"H\xe3y ch\u1ecdn ph\xf2ng!"}],children:Object(p.jsx)(be.a,{children:x.room.map((function(e){return Object(p.jsx)(be.a.Option,{value:e.id,children:e.name},e.id)}))})}),Object(p.jsx)(Y.a.Item,{label:"S\u1ed1 l\u01b0\u1ee3ng \u0111i\u1ec7n ti\xeau th\u1ee5",name:"amountOfElectricity",rules:[{required:!0,message:"H\xe3y nh\u1eadp s\u1ed1 l\u01b0\u1ee3ng \u0111i\u1ec7n ti\xeau th\u1ee5!"}],children:Object(p.jsx)(Te.a,{style:{width:"100%"}})}),Object(p.jsx)(Y.a.Item,{label:"S\u1ed1 l\u01b0\u1ee3ng n\u01b0\u1edbc ti\xeau th\u1ee5",name:"amountOfWater",rules:[{required:!0,message:"H\xe3y nh\u1eadp s\u1ed1 l\u01b0\u1ee3ng n\u01b0\u1edbc ti\xeau th\u1ee5!"}],children:Object(p.jsx)(Te.a,{style:{width:"100%"}})}),Object(p.jsx)(Y.a.Item,{label:"S\u1ed1 l\u01b0\u1ee3ng xe",name:"numberOfVehicles",rules:[{required:!0,message:"H\xe3y nh\u1eadp s\u1ed1 l\u01b0\u1ee3ng xe!"}],children:Object(p.jsx)(Te.a,{style:{width:"100%"}})}),Object(p.jsx)(Y.a.Item,{label:"Th\u1eddi gian",name:"date",style:{marginBottom:0},rules:[{required:!0,message:"H\xe3y ch\u1ecdn th\u1eddi gian!"}],children:Object(p.jsx)(le.a,{style:{width:"100%"},picker:"month",format:"MM/YYYY"})})]})})]})},Le=function(){var e=Object(c.useState)(!1),t=Object(b.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)([]),i=Object(b.a)(r,2),o=i[0],s=i[1],l=Object(c.useState)(""),u=Object(b.a)(l,2),d=u[0],m=u[1],j=Y.a.useForm(),f=Object(b.a)(j,1)[0],O=window.roomManagementSystemDB,g=function(){var e=Object(I.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,O.equipment.toArray();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){g()}),[]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(ne.a,{extra:[Object(p.jsx)(v.a,{type:"primary",onClick:function(){return a(!0)},children:"Th\xeam m\u1edbi"})],header:{title:"Qu\u1ea3n l\xfd trang thi\u1ebft b\u1ecb"},children:Object(p.jsx)(ae.a,{style:{height:window.innerHeight-168},className:"ag-theme-alpine",children:Object(p.jsx)(we.AgGridReact,{animateRows:!0,defaultColDef:{floatingFilter:!0,sortable:!0,filter:!0},columnDefs:[{headerName:"M\xe3",field:"code",filter:"agTextColumnFilter"},{headerName:"T\xean",field:"name",filter:"agTextColumnFilter"},{headerName:"S\u1ed1 l\u01b0\u1ee3ng",field:"number",filter:"agTextColumnFilter"},{pinned:"right",field:"",width:100,floatingFilter:!1,cellRendererFramework:function(e){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(pe.a,{title:"Ch\u1ec9nh s\u1eeda",children:Object(p.jsx)(v.a,{onClick:function(){return t=e.data,m(t.id),a(!0),void f.setFieldsValue(t);var t},icon:Object(p.jsx)(ye.a,{}),style:{marginRight:8},type:"primary"})}),Object(p.jsx)(pe.a,{title:"X\xf3a",children:Object(p.jsx)(v.a,{icon:Object(p.jsx)(ve.a,{}),danger:!0,onClick:function(){return t=e.data,void xe.a.warning({title:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a ".concat(t.name,"?"),onOk:function(){O.equipment.where("code").equals(t.code).delete().then((function(){M.a.success("X\xf3a th\xe0nh c\xf4ng!"),g()}))}});var t}})})]})}}],rowData:o})})}),Object(p.jsx)(xe.a,{visible:n,title:d?"Ch\u1ec9nh s\u1eeda":"Th\xeam trang thi\u1ebft b\u1ecb m\u1edbi m\u1edbi",centered:!0,cancelText:"H\u1ee7y",onOk:function(){f.validateFields().then(function(){var e=Object(I.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.equipment.where("code").equals(t.code).toArray();case 2:if(!(e.sent.filter((function(e){var t=e.id;return d?d!==t:t})).length>0)){e.next=6;break}return M.a.error("".concat(t.name," \u0111\xe3 t\u1ed3n t\u1ea1i!")),e.abrupt("return");case 6:if(!d){e.next=9;break}return O.equipment.update(d,t).then((function(e){e?(M.a.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng!"),a(!1),m(""),f.resetFields(),g()):M.a.error("C\u1eadp nh\u1eadt th\u1ea5t b\u1ea1i!")})),e.abrupt("return");case 9:O.equipment.add(Object(h.a)({id:Object(D.a)()},t)).then((function(){M.a.success("T\u1ea1o th\xe0nh c\xf4ng!"),a(!1),f.resetFields(),g()}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},onCancel:function(){a(!1),m(""),f.resetFields()},children:Object(p.jsxs)(Y.a,{name:"add-form",form:f,labelCol:{span:6},wrapperCol:{span:18},children:[Object(p.jsx)(Y.a.Item,{label:"M\xe3",name:"code",rules:[{required:!0,message:"H\xe3y nh\u1eadp m\xe3!"}],children:Object(p.jsx)(C.a,{autoFocus:!0})}),Object(p.jsx)(Y.a.Item,{label:"T\xean",name:"name",rules:[{required:!0,message:"H\xe3y nh\u1eadp t\xean!"}],children:Object(p.jsx)(C.a,{})}),Object(p.jsx)(Y.a.Item,{label:"S\u1ed1 l\u01b0\u01a1ng",name:"number",rules:[{required:!0,message:"H\xe3y nh\u1eadp s\u1ed1 l\u01b0\u1ee3ng!"}],children:Object(p.jsx)(Te.a,{style:{width:"100%"}})})]})})]})},ze=n(648),Ue=function(){var e=Object(c.useState)(0),t=Object(b.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),i=Object(b.a)(r,2),o=i[0],s=i[1],l=Object(c.useState)("/analysis"),u=Object(b.a)(l,2),d=u[0],m=u[1],O=Object(c.useContext)(g).setAuthenticate;Object(c.useEffect)((function(){localStorage.getItem("TOUR_GUIDE")||s(!0)}),[]);var x=function(e){"logout"===e.key&&(O(!1),localStorage.removeItem("access-token"))};return Object(p.jsx)(j.a,{children:Object(p.jsxs)(L.a,Object(h.a)(Object(h.a)({},te),{},{location:{pathname:d},title:"Qu\u1ea3n l\xfd ph\xf2ng tr\u1ecd",logo:null,rightContentRender:function(){return Object(p.jsx)(E.a,{overlay:Object(p.jsx)(K.a,{onClick:x,children:Object(p.jsx)(K.a.Item,{icon:Object(p.jsx)(X.a,{}),children:"\u0110\u0103ng xu\u1ea5t"},"logout")}),children:Object(p.jsx)(Q.a,{size:"small",icon:Object(p.jsx)(q.a,{})})})},menuItemRender:function(e,t){return Object(p.jsx)(j.b,{to:e.path,onClick:function(){m(e.path),"/kind-of-room"===e.path&&a(1),"/room"===e.path&&a(5)},children:t})},fixSiderbar:!0,children:[Object(p.jsxs)(f.d,{children:[Object(p.jsx)(f.b,{render:function(){return Object(p.jsx)(je,{})},path:"/analysis"},"analysis"),Object(p.jsx)(f.b,{render:function(){return Object(p.jsx)(ke,{changeTourStep:a,changeTourOpen:s})},path:"/room"},"room"),Object(p.jsx)(f.b,{render:function(){return Object(p.jsx)(qe,{})},path:"/customer"},"customer"),Object(p.jsx)(f.b,{render:function(){return Object(p.jsx)(Pe,{})},path:"/agreement"},"agreement"),Object(p.jsx)(f.b,{render:function(){return Object(p.jsx)(Se,{changeTourStep:a,changeTourOpen:s})},path:"/kind-of-room"},"kind-of-room"),Object(p.jsx)(f.b,{render:function(){return Object(p.jsx)(Qe,{})},path:"/unit-price"},"unit-price"),Object(p.jsx)(f.b,{render:function(){return Object(p.jsx)(Xe,{})},path:"/bill"},"bill"),Object(p.jsx)(f.b,{render:function(){return Object(p.jsx)(Le,{})},path:"/equipment"},"equipment")]}),Object(p.jsx)(ze.a,{steps:[{selector:"ul.ant-menu-inline li.ant-menu-item:nth-child(3)",content:"H\xe3y t\u1ea1o lo\u1ea1i ph\xf2ng!"},{selector:".ant-page-header-heading-extra .ant-btn",content:"T\u1ea1o m\u1edbi lo\u1ea1i ph\xf2ng!"},{selector:".ant-modal-wrap .ant-modal-body",content:"T\u1ea1o th\xf4ng tin lo\u1ea1i ph\xf2ng!"},{selector:".ant-modal-wrap .ant-modal-content .ant-modal-footer .ant-btn.ant-btn-primary",content:"Sau \u0111\xf3 nh\u1ea5n OK!"},{selector:"ul.ant-menu-inline li.ant-menu-item:nth-child(2)",content:"H\xe3y t\u1ea1o ph\xf2ng!"},{selector:".ant-page-header-heading-extra .ant-btn",content:"T\u1ea1o m\u1edbi ph\xf2ng!"},{selector:".ant-modal-wrap .ant-modal-body",content:"T\u1ea1o th\xf4ng tin ph\xf2ng!"},{selector:".ant-modal-wrap .ant-modal-content .ant-modal-footer .ant-btn.ant-btn-primary",content:"Sau \u0111\xf3 nh\u1ea5n OK!"},{selector:"ul.ant-menu-inline li.ant-menu-item:nth-child(4)",content:"H\xe3y t\u1ea1o kh\xe1ch h\xe0ng!"},{selector:".ant-page-header-heading-extra .ant-btn",content:"T\u1ea1o m\u1edbi kh\xe1ch h\xe0ng!"},{selector:".ant-modal-wrap .ant-modal-body",content:"T\u1ea1o th\xf4ng tin kh\xe1ch h\xe0ng!"},{selector:".ant-modal-wrap .ant-modal-content .ant-modal-footer .ant-btn.ant-btn-primary",content:"Sau \u0111\xf3 nh\u1ea5n OK!"},{selector:"ul.ant-menu-inline li.ant-menu-item:nth-child(5))",content:"H\xe3y t\u1ea1o h\u1ee3p \u0111\u1ed3ng!"},{selector:".ant-page-header-heading-extra .ant-btn",content:"T\u1ea1o m\u1edbi h\u1ee3p \u0111\u1ed3ng!"},{selector:".ant-modal-wrap .ant-modal-body",content:"T\u1ea1o th\xf4ng tin h\u1ee3p \u0111\u1ed3ng!"},{selector:".ant-modal-wrap .ant-modal-content .ant-modal-footer .ant-btn.ant-btn-primary",content:"Sau \u0111\xf3 nh\u1ea5n OK!"}],showCloseButton:!1,showButtons:!1,showNavigation:!1,goToStep:n,isOpen:o,disableKeyboardNavigation:!0,onRequestClose:function(){return s(!1)}})]}))})},We=function(){var e=Object(c.useContext)(g).authenticate;return Object(p.jsx)(j.a,{basename:"/",children:Object(p.jsx)(f.d,{children:Object(p.jsx)(f.b,{path:"/",render:function(t){return e?Object(p.jsxs)(f.d,{children:[Object(p.jsx)(f.b,{exact:!0,path:"/analysis",render:function(){return Object(p.jsx)(Ue,{})}},"analysis"),Object(p.jsx)(f.a,{to:"/analysis"})]}):Object(p.jsxs)(f.d,{children:[Object(p.jsx)(f.b,{exact:!0,path:"/login",render:function(){return Object(p.jsx)(A,Object(h.a)({},t))}},"login"),Object(p.jsx)(f.a,{to:"/login"})]})}})})})},Je=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,1120)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};n(1092);u.LicenseManager.setLicenseKey("NDEwMjMzMzIwMDAwMA==4776ae9eddc069aad222a64b09b9e834"),window.roomManagementSystemDB=new l.a("room-management-system"),window.roomManagementSystemDB.version(1).stores({account:"id,username,password",room:"id,code,name,stillEmpty,kindOfRoomId",kindOfRoom:"id,code,name,price,deposit",agreement:"id,code,roomId,customerIds,date",customer:"id,code,fullName,identityCardNumber,dateOfBirth,sex,address,phoneNumber,job",unitPrice:"id,code,water,electricity,parking,junkMoney,date",bill:"id,code,amountOfWater,amountOfElectricity,numberOfVehicles,date,formatDate,roomId",equipment:"id,code,name,number"}),s.a.render(Object(p.jsx)(i.a.StrictMode,{children:Object(p.jsx)(r.a,{locale:m.a,children:Object(p.jsx)(x,{children:Object(p.jsx)(We,{})})})}),document.getElementById("root")),Je()},677:function(e,t){},679:function(e,t){},691:function(e,t){},693:function(e,t){},721:function(e,t){},723:function(e,t){},724:function(e,t){},729:function(e,t){},731:function(e,t){},737:function(e,t){},739:function(e,t){},758:function(e,t){},770:function(e,t){},773:function(e,t){},800:function(e,t,n){}},[[1097,1,2]]]);
//# sourceMappingURL=main.475a9044.chunk.js.map